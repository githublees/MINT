{"ast":null,"code":"import _objectSpread from\"C:/SSAFY/WORKSPACE/NFT/S06P22A106/frontend/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import _asyncToGenerator from\"C:/SSAFY/WORKSPACE/NFT/S06P22A106/frontend/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _slicedToArray from\"C:/SSAFY/WORKSPACE/NFT/S06P22A106/frontend/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import _regeneratorRuntime from\"C:\\\\SSAFY\\\\WORKSPACE\\\\NFT\\\\S06P22A106\\\\frontend\\\\node_modules\\\\@babel\\\\runtime\\\\regenerator\\\\index.js\";import*as Yup from'yup';import{LoadingButton,LocalizationProvider,MobileDatePicker}from'@mui/lab';import DateAdapter from'@mui/lab/AdapterDateFns';import{motion}from'framer-motion';import{Link as RouterLink}from'react-router-dom';import{useLocation}from'react-router-dom';import{MotionContainer,varBounceIn}from'../components/animate';import{Box,Button,Card,CardContent,CardHeader,Container,Divider,Modal,Stack,TextField,Typography}from'@mui/material';import{styled}from'@mui/material/styles';import{Form,FormikProvider,useFormik}from'formik';import{useState,useEffect}from'react';import axios from'axios';import Web3 from'web3';import getAddressFrom from'../utils/AddressExtractor';import sendTransaction from'../utils/TxSender';import COMMON_HEADER from'../common/HeaderType';import COMMON_ABI from'../common/ABI';import{onResponse,onContractCall}from'../common/ErrorMessage';import moment from'moment';import Page from'../components/Page';// 이미지 스타일\nimport{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";var ImgStyle=styled('img')({top:0,width:'100%',height:'100%',objectFit:'contain',position:'absolute'});/**\r\n * [판매 정보 등록]\r\n */var SaleRegistration=function SaleRegistration(){// [변수] 토큰 ID (URL 파라미터 사용)\nvar tokenId=useLocation().pathname.substring(15);// [변수] 아이템, 심볼, 작가명, 소유자 주소, 제목, 아이템 소개, 판매 종료일, 즉시 구매가, 최소 제안가,\n//       타임스탬프 (현재 시점, 종료 시점), 컬렉션 판매 유무, 판매 완료 여부\nvar _useState=useState(''),_useState2=_slicedToArray(_useState,2),item=_useState2[0],setItem=_useState2[1];var symbol='SSF';var _useState3=useState(''),_useState4=_slicedToArray(_useState3,2),author=_useState4[0],setAuthor=_useState4[1];var _useState5=useState(''),_useState6=_slicedToArray(_useState5,2),authorAddr=_useState6[0],setAuthorAdr=_useState6[1];var _useState7=useState(''),_useState8=_slicedToArray(_useState7,2),title=_useState8[0],setTitle=_useState8[1];var _useState9=useState(''),_useState10=_slicedToArray(_useState9,2),description=_useState10[0],setDescription=_useState10[1];var _useState11=useState(new Date().toLocaleDateString('ko-KR')),_useState12=_slicedToArray(_useState11,2),date=_useState12[0],setDate=_useState12[1];var _useState13=useState('0'),_useState14=_slicedToArray(_useState13,2),price=_useState14[0],setPrice=_useState14[1];var _useState15=useState('0'),_useState16=_slicedToArray(_useState15,2),minPrice=_useState16[0],setMinPrice=_useState16[1];var _useState17=useState(''),_useState18=_slicedToArray(_useState17,2),current=_useState18[0],setCurrent=_useState18[1];var _useState19=useState(''),_useState20=_slicedToArray(_useState19,2),due=_useState20[0],setDue=_useState20[1];var _useState21=useState(false),_useState22=_slicedToArray(_useState21,2),isSale=_useState22[0],setIsSale=_useState22[1];var _useState23=useState(false),_useState24=_slicedToArray(_useState23,2),isComplete=_useState24[0],setIsComplete=_useState24[1];// [변수] 판매 등록 모달 (모달, 개인키, 등록 로딩)\nvar _useState25=useState(false),_useState26=_slicedToArray(_useState25,2),approveModal=_useState26[0],setApproveModal=_useState26[1];var _useState27=useState(''),_useState28=_slicedToArray(_useState27,2),privKey=_useState28[0],setPrivKey=_useState28[1];var _useState29=useState(false),_useState30=_slicedToArray(_useState29,2),loading=_useState30[0],setLoading=_useState30[1];// Web3\nvar web3=new Web3(new Web3.providers.HttpProvider(process.env.REACT_APP_ETHEREUM_RPC_URL));/**\r\n   * [초기 데이터 설정]\r\n   * 화면 첫 렌더링시 아이템의 정보를 조회합니다.\r\n   */useEffect(function(){checkInfo();},[]);// 타이핑 헬퍼\nvar typeSchema=Yup.object().shape({price:Yup.number().positive().integer().required(),minPrice:Yup.number().positive().integer().required()});// 입력 데이터 처리\nvar formik=useFormik({initialValues:{price:'',minPrice:''},validationSchema:typeSchema,onSubmit:function onSubmit(value){setPrice(value.price);setMinPrice(value.minPrice);}});var errors=formik.errors,touched=formik.touched,handleSubmit=formik.handleSubmit,handleReset=formik.handleReset,getFieldProps=formik.getFieldProps;// 판매 종료일 선택 핸들링\nvar handleDate=function handleDate(value){setDate(value);};// 모달 핸들링 (판매 승인)\nvar toggleApprove=function toggleApprove(){setApproveModal(!approveModal);};// 개인키 입력 핸들링\nvar handlePrivKey=function handlePrivKey(e){setPrivKey(e.target.value);};/**\r\n   * [판매 종료일 검증]\r\n   * 현재 시간과 판매 종료일을 확인하여 당일이 아닌 경우에만 판매 등록 승인 모달창을 띄웁니다.\r\n   * 판매 종료 시간은 해달 날짜의 자정(0시)으로 고정됩니다.\r\n   * 필요에 따라 시간을 지정할 수 있도록 변경해도 괜찮습니다. \r\n   */var checkDate=function checkDate(){var now=parseInt((moment()/1000).toFixed(0));var endDate=parseInt((moment(date)/1000).toFixed(0));if(now>endDate)alert('당일은 판매 종료일로 설정할 수 없습니다.');else{setCurrent(now);setDue(endDate);toggleApprove();}};/**\r\n   * PJT Ⅱ - 과제 2: 작품 조회\r\n   * Req. 2-F3 작품 상세 조회\r\n   * \r\n   * token id로 작품의 상세 정보를 조회합니다.\r\n   * 작품의 tokenURI를 NFT로부터 직접 조회합니다.\r\n   * \r\n   * PJT Ⅲ - 과제 2: 작품 판매 등록 \r\n   * Req. 2-F3 작품 상세 화면 수정\r\n   * \r\n   * 작품의 판매 등록 여부에 따라 sale 컨트랙트를 호출 할 수 있는 버튼\r\n   * (제안하기, 구매하기)이 추가되어야 합니다. \r\n   * \r\n   */var checkInfo=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:// TODO\nsetIsSale(false);case 1:case\"end\":return _context.stop();}}},_callee);}));return function checkInfo(){return _ref.apply(this,arguments);};}();/**\r\n   * PJT Ⅲ - 과제 2: 작품 판매 등록 \r\n   * Req. 2-F2 Sale 컨트랙트 생성 \r\n   * \r\n   * 1. 판매 등록 승인 모달창에 개인키를 입력하면 getAddressFrom() 함수를 이용해 공개키를 반환 받습니다.\r\n   * 2. 공개키가 유효한 경우 Sale Factory 컨트랙트의 createSale() 함수를 호출하여 새로운 Sale 컨트랙트를 생성합니다.\r\n   * 3. 컨트랙트 정상 호출 후 새로운 Sale 컨트랙트의 주소를 반환 받습니다.\r\n   * 4. 생성된 Sale 컨트랙트가 판매자를 대신하여 NFT 소유권을 이전할 수 있도록 Sale에게 NFT를 전송합니다 (transferFrom())\r\n   * 5. 위 과정이 모두 정상 수행되었다면 API를 호출하여 판매 정보를 등록합니다. \r\n   * \r\n   */var createSaleContract=/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee2(){return _regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:// TODO     \nsetLoading(false);case 1:case\"end\":return _context2.stop();}}},_callee2);}));return function createSaleContract(){return _ref2.apply(this,arguments);};}();/**\r\n   * PJT Ⅲ - 과제 2: 작품 판매 등록 \r\n   * Req. 2-F1 판매 등록 화면 \r\n   * Req. 2-F2 Sale 컨트랙트 생성 \r\n   * \r\n   * 위 createSaleContract()에서\r\n   * 정상 수행 후 반환되는 판매 정보를 API로 호출하여 업데이트합니다.\r\n   */var registerSaleInfo=/*#__PURE__*/function(){var _ref3=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee3(pubKey,saleCA){return _regeneratorRuntime.wrap(function _callee3$(_context3){while(1){switch(_context3.prev=_context3.next){case 0:setLoading(false);case 1:case\"end\":return _context3.stop();}}},_callee3);}));return function registerSaleInfo(_x,_x2){return _ref3.apply(this,arguments);};}();return/*#__PURE__*/_jsx(Page,{title:\"SSAFY NFT\",maxWidth:\"100%\",minHeight:\"100%\",children:isComplete===false?/*#__PURE__*/_jsx(_Fragment,{children:isSale===true?/*#__PURE__*/_jsxs(Container,{sx:{pt:3,pl:10,pr:10},children:[/*#__PURE__*/_jsx(Typography,{variant:\"h3\",sx:{pb:3,pr:10},children:\"\\uD310\\uB9E4 \\uC815\\uBCF4\\uB97C \\uB4F1\\uB85D\\uD574\\uC8FC\\uC138\\uC694.\"}),/*#__PURE__*/_jsxs(Stack,{direction:\"row\",sx:{mt:4},children:[/*#__PURE__*/_jsx(Stack,{width:\"30%\",children:/*#__PURE__*/_jsx(Card,{children:/*#__PURE__*/_jsx(Box,{sx:{pt:'100%',position:'relative'},children:/*#__PURE__*/_jsx(ImgStyle,{src:item.length!==0?item:null})})})}),/*#__PURE__*/_jsx(Stack,{sx:{ml:10},width:\"70%\",children:/*#__PURE__*/_jsxs(Card,{children:[/*#__PURE__*/_jsx(CardHeader,{sx:{ml:1,mb:2},title:\"\\uC791\\uD488 \\uC815\\uBCF4\"}),/*#__PURE__*/_jsx(Divider,{}),/*#__PURE__*/_jsxs(CardContent,{sx:{ml:1,mr:1,pt:4},children:[/*#__PURE__*/_jsxs(Stack,{direction:\"row\",children:[/*#__PURE__*/_jsx(Typography,{sx:{fontSize:18},children:\" \\uC791\\uAC00\\uBA85 : \"}),/*#__PURE__*/_jsx(Typography,{sx:{ml:1},variant:\"h6\",children:author})]}),/*#__PURE__*/_jsxs(Stack,{direction:\"row\",sx:{mt:3},children:[/*#__PURE__*/_jsx(Typography,{sx:{fontSize:18},children:\" \\uC81C\\uBAA9 : \"}),/*#__PURE__*/_jsx(Typography,{sx:{ml:1},variant:\"h6\",children:title})]}),/*#__PURE__*/_jsxs(Stack,{direction:\"row\",sx:{mt:3},children:[/*#__PURE__*/_jsx(Typography,{sx:{fontSize:18},children:\" \\uC544\\uC774\\uD15C \\uC18C\\uAC1C : \"}),/*#__PURE__*/_jsx(Typography,{sx:{ml:1},variant:\"h6\",children:description})]})]})]})})]}),/*#__PURE__*/_jsx(Stack,{sx:{mb:7}}),/*#__PURE__*/_jsx(FormikProvider,{value:formik,children:/*#__PURE__*/_jsxs(Form,{autoComplete:\"off\",noValidate:true,onSubmit:handleSubmit,onReset:handleReset,children:[/*#__PURE__*/_jsxs(Stack,{spacing:3,children:[/*#__PURE__*/_jsxs(Stack,{direction:\"row\",alignItems:\"center\",children:[/*#__PURE__*/_jsx(TextField,_objectSpread(_objectSpread({sx:{width:'100%'},type:\"number\",label:\"\\uC989\\uC2DC \\uAD6C\\uB9E4\\uAC00\"},getFieldProps('price')),{},{error:Boolean(touched.price&&errors.price)})),/*#__PURE__*/_jsx(Typography,{variant:\"h5\",sx:{pl:2},children:symbol})]}),/*#__PURE__*/_jsxs(Stack,{direction:\"row\",alignItems:\"center\",children:[/*#__PURE__*/_jsx(TextField,_objectSpread(_objectSpread({sx:{width:'100%'},type:\"number\",label:\"\\uCD5C\\uC18C \\uC81C\\uC548\\uAC00\"},getFieldProps('minPrice')),{},{error:Boolean(touched.minPrice&&errors.minPrice)})),/*#__PURE__*/_jsx(Typography,{variant:\"h5\",sx:{pl:2},children:symbol})]}),/*#__PURE__*/_jsx(LocalizationProvider,{dateAdapter:DateAdapter,children:/*#__PURE__*/_jsx(Stack,{sx:{pt:1},children:/*#__PURE__*/_jsx(MobileDatePicker,{label:\"\\uD310\\uB9E4 \\uC885\\uB8CC\\uC77C\",inputFormat:\"yyyy-MM-dd\",value:date,disablePast:true,onChange:handleDate,renderInput:function renderInput(params){return/*#__PURE__*/_jsx(TextField,_objectSpread({sx:{width:'100%'}},params));}})})})]}),/*#__PURE__*/_jsx(Divider,{sx:{mt:5,width:'100%'}}),/*#__PURE__*/_jsxs(Stack,{alignItems:\"flex-end\",children:[/*#__PURE__*/_jsx(Button,{sx:{mt:5,width:'40%',fontSize:18},size:\"large\",type:\"submit\",variant:\"contained\",onClick:Object.keys(touched).length&&!Object.keys(errors).length&&item.length!==0?checkDate:null,children:\"\\uD310\\uB9E4 \\uB4F1\\uB85D\"}),/*#__PURE__*/_jsx(Modal,{open:approveModal,children:/*#__PURE__*/_jsxs(Card,{sx:{width:'40%',border:1,borderRadius:1,borderColor:'grey.main',backgroundColor:'#ffffff',top:'25%',left:'30%'},children:[/*#__PURE__*/_jsx(Box,{children:/*#__PURE__*/_jsx(Typography,{sx:{ml:3,pt:2},variant:\"h5\",children:\"\\uD310\\uB9E4 \\uC2B9\\uC778\\uD558\\uAE30\"})}),/*#__PURE__*/_jsx(Divider,{sx:{mt:2}}),/*#__PURE__*/_jsx(FormikProvider,{value:formik,children:/*#__PURE__*/_jsx(Form,{autoComplete:\"off\",noValidate:true,onSubmit:handleSubmit,onReset:handleReset,children:/*#__PURE__*/_jsxs(Box,{sx:{mt:4,ml:3,mr:3},children:[/*#__PURE__*/_jsx(Stack,{direction:\"row\",sx:{mt:3},children:/*#__PURE__*/_jsx(TextField,{fullWidth:true,type:\"text\",label:\"\\uAC1C\\uC778\\uD0A4\",onChange:handlePrivKey})}),/*#__PURE__*/_jsx(Divider,{sx:{mt:4}}),/*#__PURE__*/_jsxs(Stack,{direction:\"row\",sx:{mt:3,mb:3},justifyContent:\"center\",children:[loading===false?/*#__PURE__*/_jsx(Button,{size:\"large\",variant:\"contained\",sx:{width:'20%',fontSize:16},onClick:toggleApprove,children:\"\\uCDE8\\uC18C\"}):null,/*#__PURE__*/_jsx(LoadingButton,{size:\"large\",variant:\"contained\",sx:{ml:3,width:'20%',fontSize:16},loading:loading,onClick:createSaleContract,children:\"\\uC2B9\\uC778\\uD558\\uAE30\"})]})]})})})]})})]})]})})]}):/*#__PURE__*/_jsx(Container,{children:/*#__PURE__*/_jsx(MotionContainer,{initial:\"initial\",sx:{mt:10},open:true,children:/*#__PURE__*/_jsxs(Box,{sx:{maxWidth:480,margin:'auto',textAlign:'center'},children:[/*#__PURE__*/_jsx(motion.div,{variants:varBounceIn,children:/*#__PURE__*/_jsx(Typography,{variant:\"h3\",paragraph:true,children:\"\\uC798\\uBABB\\uB41C \\uC811\\uADFC\\uC785\\uB2C8\\uB2E4.\"})}),/*#__PURE__*/_jsx(Typography,{sx:{color:'text.secondary'},children:\"\\uC774\\uBBF8 \\uD310\\uB9E4\\uB418\\uACE0 \\uC788\\uB294 \\uC544\\uC774\\uD15C\\uC774\\uAC70\\uB098 \\uC815\\uBCF4\\uB97C \\uCC3E\\uC744 \\uC218 \\uC5C6\\uC2B5\\uB2C8\\uB2E4.\"}),/*#__PURE__*/_jsx(motion.div,{variants:varBounceIn,children:/*#__PURE__*/_jsx(Box,{component:\"img\",src:\"/static/illustrations/illustration_register.png\",sx:{height:260,mx:'auto',my:{xs:5,sm:10}}})})]})})})}):/*#__PURE__*/_jsx(Container,{children:/*#__PURE__*/_jsx(MotionContainer,{initial:\"initial\",sx:{mt:10},open:true,children:/*#__PURE__*/_jsxs(Box,{sx:{maxWidth:480,margin:'auto',textAlign:'center'},children:[/*#__PURE__*/_jsx(motion.div,{variants:varBounceIn,children:/*#__PURE__*/_jsx(Typography,{variant:\"h3\",paragraph:true,children:\"\\uD310\\uB9E4 \\uB4F1\\uB85D \\uC644\\uB8CC\"})}),/*#__PURE__*/_jsx(Typography,{sx:{color:'text.secondary'},children:\"\\uD310\\uB9E4 \\uB4F1\\uB85D\\uC774 \\uC644\\uB8CC\\uB418\\uC5C8\\uC2B5\\uB2C8\\uB2E4.\"}),/*#__PURE__*/_jsx(motion.div,{variants:varBounceIn,children:/*#__PURE__*/_jsx(Box,{component:\"img\",src:\"/static/illustrations/illustration_register.png\",sx:{height:260,mx:'auto',my:{xs:5,sm:10}}})}),/*#__PURE__*/_jsx(Button,{to:\"/\",size:\"large\",variant:\"contained\",component:RouterLink,children:\"\\uD648\\uC73C\\uB85C \\uB3CC\\uC544\\uAC00\\uAE30\"})]})})})});};export default SaleRegistration;","map":{"version":3,"sources":["C:/SSAFY/WORKSPACE/NFT/S06P22A106/frontend/src/pages/SaleRegistration.js"],"names":["Yup","LoadingButton","LocalizationProvider","MobileDatePicker","DateAdapter","motion","Link","RouterLink","useLocation","MotionContainer","varBounceIn","Box","Button","Card","CardContent","CardHeader","Container","Divider","Modal","Stack","TextField","Typography","styled","Form","FormikProvider","useFormik","useState","useEffect","axios","Web3","getAddressFrom","sendTransaction","COMMON_HEADER","COMMON_ABI","onResponse","onContractCall","moment","Page","ImgStyle","top","width","height","objectFit","position","SaleRegistration","tokenId","pathname","substring","item","setItem","symbol","author","setAuthor","authorAddr","setAuthorAdr","title","setTitle","description","setDescription","Date","toLocaleDateString","date","setDate","price","setPrice","minPrice","setMinPrice","current","setCurrent","due","setDue","isSale","setIsSale","isComplete","setIsComplete","approveModal","setApproveModal","privKey","setPrivKey","loading","setLoading","web3","providers","HttpProvider","process","env","REACT_APP_ETHEREUM_RPC_URL","checkInfo","typeSchema","object","shape","number","positive","integer","required","formik","initialValues","validationSchema","onSubmit","value","errors","touched","handleSubmit","handleReset","getFieldProps","handleDate","toggleApprove","handlePrivKey","e","target","checkDate","now","parseInt","toFixed","endDate","alert","createSaleContract","registerSaleInfo","pubKey","saleCA","pt","pl","pr","pb","mt","length","ml","mb","mr","fontSize","Boolean","params","Object","keys","border","borderRadius","borderColor","backgroundColor","left","maxWidth","margin","textAlign","color","mx","my","xs","sm"],"mappings":"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","sourcesContent":["import * as Yup from 'yup';\r\nimport { LoadingButton, LocalizationProvider, MobileDatePicker } from '@mui/lab';\r\nimport DateAdapter from '@mui/lab/AdapterDateFns';\r\nimport { motion } from 'framer-motion';\r\nimport { Link as RouterLink } from 'react-router-dom';\r\nimport { useLocation } from 'react-router-dom';\r\nimport { MotionContainer, varBounceIn } from '../components/animate';\r\nimport {\r\n  Box,\r\n  Button,\r\n  Card,\r\n  CardContent,\r\n  CardHeader,\r\n  Container,\r\n  Divider,\r\n  Modal,\r\n  Stack,\r\n  TextField,\r\n  Typography\r\n} from '@mui/material';\r\nimport { styled } from '@mui/material/styles';\r\nimport { Form, FormikProvider, useFormik } from 'formik';\r\nimport { useState, useEffect } from 'react';\r\nimport axios from 'axios';\r\nimport Web3 from 'web3';\r\nimport getAddressFrom from '../utils/AddressExtractor';\r\nimport sendTransaction from '../utils/TxSender';\r\nimport COMMON_HEADER from '../common/HeaderType';\r\nimport COMMON_ABI from '../common/ABI';\r\nimport { onResponse, onContractCall } from '../common/ErrorMessage';\r\nimport moment from 'moment';\r\nimport Page from '../components/Page';\r\n\r\n// 이미지 스타일\r\nconst ImgStyle = styled('img')({\r\n  top: 0,\r\n  width: '100%',\r\n  height: '100%',\r\n  objectFit: 'contain',\r\n  position: 'absolute'\r\n});\r\n\r\n/**\r\n * [판매 정보 등록]\r\n */\r\nconst SaleRegistration = () => {\r\n  // [변수] 토큰 ID (URL 파라미터 사용)\r\n  const tokenId = useLocation().pathname.substring(15);\r\n\r\n  // [변수] 아이템, 심볼, 작가명, 소유자 주소, 제목, 아이템 소개, 판매 종료일, 즉시 구매가, 최소 제안가,\r\n  //       타임스탬프 (현재 시점, 종료 시점), 컬렉션 판매 유무, 판매 완료 여부\r\n  const [item, setItem] = useState('');\r\n  const symbol = 'SSF';\r\n  const [author, setAuthor] = useState('');\r\n  const [authorAddr, setAuthorAdr] = useState('');\r\n  const [title, setTitle] = useState('');\r\n  const [description, setDescription] = useState('');\r\n  const [date, setDate] = useState(new Date().toLocaleDateString('ko-KR'));\r\n  const [price, setPrice] = useState('0');\r\n  const [minPrice, setMinPrice] = useState('0');\r\n  const [current, setCurrent] = useState('');\r\n  const [due, setDue] = useState('');\r\n  const [isSale, setIsSale] = useState(false);\r\n  const [isComplete, setIsComplete] = useState(false);\r\n\r\n  // [변수] 판매 등록 모달 (모달, 개인키, 등록 로딩)\r\n  const [approveModal, setApproveModal] = useState(false);\r\n  const [privKey, setPrivKey] = useState('');\r\n  const [loading, setLoading] = useState(false);\r\n\r\n  // Web3\r\n  const web3 = new Web3(new Web3.providers.HttpProvider(process.env.REACT_APP_ETHEREUM_RPC_URL));\r\n\r\n\r\n  /**\r\n   * [초기 데이터 설정]\r\n   * 화면 첫 렌더링시 아이템의 정보를 조회합니다.\r\n   */\r\n  useEffect(() => {\r\n    checkInfo();\r\n  }, []);\r\n\r\n  // 타이핑 헬퍼\r\n  const typeSchema = Yup.object().shape({\r\n    price: Yup.number().positive().integer().required(),\r\n    minPrice: Yup.number().positive().integer().required()\r\n  });\r\n\r\n  // 입력 데이터 처리\r\n  const formik = useFormik({\r\n    initialValues: {\r\n      price: '',\r\n      minPrice: ''\r\n    },\r\n    validationSchema: typeSchema,\r\n    onSubmit: (value) => {\r\n      setPrice(value.price);\r\n      setMinPrice(value.minPrice);\r\n    }\r\n  });\r\n  const { errors, touched, handleSubmit, handleReset, getFieldProps } = formik;\r\n\r\n  // 판매 종료일 선택 핸들링\r\n  const handleDate = (value) => {\r\n    setDate(value);\r\n  };\r\n\r\n  // 모달 핸들링 (판매 승인)\r\n  const toggleApprove = () => {\r\n    setApproveModal(!approveModal);\r\n  };\r\n\r\n  // 개인키 입력 핸들링\r\n  const handlePrivKey = (e) => {\r\n    setPrivKey(e.target.value);\r\n  };\r\n\r\n  /**\r\n   * [판매 종료일 검증]\r\n   * 현재 시간과 판매 종료일을 확인하여 당일이 아닌 경우에만 판매 등록 승인 모달창을 띄웁니다.\r\n   * 판매 종료 시간은 해달 날짜의 자정(0시)으로 고정됩니다.\r\n   * 필요에 따라 시간을 지정할 수 있도록 변경해도 괜찮습니다. \r\n   */\r\n  const checkDate = () => {\r\n    const now = parseInt((moment() / 1000).toFixed(0));\r\n    const endDate = parseInt((moment(date) / 1000).toFixed(0));\r\n\r\n    if (now > endDate) alert('당일은 판매 종료일로 설정할 수 없습니다.');\r\n    else {\r\n      setCurrent(now);\r\n      setDue(endDate);\r\n      toggleApprove();\r\n    }\r\n  };\r\n\r\n\r\n  /**\r\n   * PJT Ⅱ - 과제 2: 작품 조회\r\n   * Req. 2-F3 작품 상세 조회\r\n   * \r\n   * token id로 작품의 상세 정보를 조회합니다.\r\n   * 작품의 tokenURI를 NFT로부터 직접 조회합니다.\r\n   * \r\n   * PJT Ⅲ - 과제 2: 작품 판매 등록 \r\n   * Req. 2-F3 작품 상세 화면 수정\r\n   * \r\n   * 작품의 판매 등록 여부에 따라 sale 컨트랙트를 호출 할 수 있는 버튼\r\n   * (제안하기, 구매하기)이 추가되어야 합니다. \r\n   * \r\n   */\r\n  const checkInfo = async () => {\r\n    // TODO\r\n    setIsSale(false);\r\n  };\r\n\r\n  /**\r\n   * PJT Ⅲ - 과제 2: 작품 판매 등록 \r\n   * Req. 2-F2 Sale 컨트랙트 생성 \r\n   * \r\n   * 1. 판매 등록 승인 모달창에 개인키를 입력하면 getAddressFrom() 함수를 이용해 공개키를 반환 받습니다.\r\n   * 2. 공개키가 유효한 경우 Sale Factory 컨트랙트의 createSale() 함수를 호출하여 새로운 Sale 컨트랙트를 생성합니다.\r\n   * 3. 컨트랙트 정상 호출 후 새로운 Sale 컨트랙트의 주소를 반환 받습니다.\r\n   * 4. 생성된 Sale 컨트랙트가 판매자를 대신하여 NFT 소유권을 이전할 수 있도록 Sale에게 NFT를 전송합니다 (transferFrom())\r\n   * 5. 위 과정이 모두 정상 수행되었다면 API를 호출하여 판매 정보를 등록합니다. \r\n   * \r\n   */\r\n  const createSaleContract = async () => {\r\n    // TODO     \r\n    setLoading(false);\r\n  };\r\n\r\n  /**\r\n   * PJT Ⅲ - 과제 2: 작품 판매 등록 \r\n   * Req. 2-F1 판매 등록 화면 \r\n   * Req. 2-F2 Sale 컨트랙트 생성 \r\n   * \r\n   * 위 createSaleContract()에서\r\n   * 정상 수행 후 반환되는 판매 정보를 API로 호출하여 업데이트합니다.\r\n   */\r\n  const registerSaleInfo = async (pubKey, saleCA) => {\r\n    setLoading(false);\r\n  };\r\n\r\n  return (\r\n    <Page title=\"SSAFY NFT\" maxWidth=\"100%\" minHeight=\"100%\">\r\n      {isComplete === false ? (\r\n        <>\r\n          {isSale === true ? (\r\n            <Container sx={{ pt: 3, pl: 10, pr: 10 }}>\r\n              <Typography variant=\"h3\" sx={{ pb: 3, pr: 10 }}>\r\n                판매 정보를 등록해주세요.\r\n              </Typography>\r\n\r\n              <Stack direction=\"row\" sx={{ mt: 4 }}>\r\n                <Stack width=\"30%\">\r\n                  <Card>\r\n                    <Box sx={{ pt: '100%', position: 'relative' }}>\r\n                      <ImgStyle src={item.length !== 0 ? item : null} />\r\n                    </Box>\r\n                  </Card>\r\n                </Stack>\r\n\r\n                <Stack sx={{ ml: 10 }} width=\"70%\">\r\n                  <Card>\r\n                    <CardHeader sx={{ ml: 1, mb: 2 }} title=\"작품 정보\" />\r\n                    <Divider />\r\n                    <CardContent sx={{ ml: 1, mr: 1, pt: 4 }}>\r\n                      <Stack direction=\"row\">\r\n                        <Typography sx={{ fontSize: 18 }}> 작가명 : </Typography>\r\n                        <Typography sx={{ ml: 1 }} variant=\"h6\">\r\n                          {author}\r\n                        </Typography>\r\n                      </Stack>\r\n                      <Stack direction=\"row\" sx={{ mt: 3 }}>\r\n                        <Typography sx={{ fontSize: 18 }}> 제목 : </Typography>\r\n                        <Typography sx={{ ml: 1 }} variant=\"h6\">\r\n                          {title}\r\n                        </Typography>\r\n                      </Stack>\r\n                      <Stack direction=\"row\" sx={{ mt: 3 }}>\r\n                        <Typography sx={{ fontSize: 18 }}> 아이템 소개 : </Typography>\r\n                        <Typography sx={{ ml: 1 }} variant=\"h6\">\r\n                          {description}\r\n                        </Typography>\r\n                      </Stack>\r\n                    </CardContent>\r\n                  </Card>\r\n                </Stack>\r\n              </Stack>\r\n\r\n              <Stack sx={{ mb: 7 }}></Stack>\r\n              <FormikProvider value={formik}>\r\n                <Form autoComplete=\"off\" noValidate onSubmit={handleSubmit} onReset={handleReset}>\r\n                  <Stack spacing={3}>\r\n                    <Stack direction=\"row\" alignItems=\"center\">\r\n                      <TextField\r\n                        sx={{ width: '100%' }}\r\n                        type=\"number\"\r\n                        label=\"즉시 구매가\"\r\n                        {...getFieldProps('price')}\r\n                        error={Boolean(touched.price && errors.price)}\r\n                      />\r\n                      <Typography variant=\"h5\" sx={{ pl: 2 }}>\r\n                        {symbol}\r\n                      </Typography>\r\n                    </Stack>\r\n                    <Stack direction=\"row\" alignItems=\"center\">\r\n                      <TextField\r\n                        sx={{ width: '100%' }}\r\n                        type=\"number\"\r\n                        label=\"최소 제안가\"\r\n                        {...getFieldProps('minPrice')}\r\n                        error={Boolean(touched.minPrice && errors.minPrice)}\r\n                      />\r\n                      <Typography variant=\"h5\" sx={{ pl: 2 }}>\r\n                        {symbol}\r\n                      </Typography>\r\n                    </Stack>\r\n                    <LocalizationProvider dateAdapter={DateAdapter}>\r\n                      <Stack sx={{ pt: 1 }}>\r\n                        <MobileDatePicker\r\n                          label=\"판매 종료일\"\r\n                          inputFormat=\"yyyy-MM-dd\"\r\n                          value={date}\r\n                          disablePast\r\n                          onChange={handleDate}\r\n                          renderInput={(params) => <TextField sx={{ width: '100%' }} {...params} />}\r\n                        />\r\n                      </Stack>\r\n                    </LocalizationProvider>\r\n                  </Stack>\r\n\r\n                  <Divider sx={{ mt: 5, width: '100%' }} />\r\n\r\n                  <Stack alignItems=\"flex-end\">\r\n                    <Button\r\n                      sx={{ mt: 5, width: '40%', fontSize: 18 }}\r\n                      size=\"large\"\r\n                      type=\"submit\"\r\n                      variant=\"contained\"\r\n                      onClick={\r\n                        Object.keys(touched).length &&\r\n                        !Object.keys(errors).length &&\r\n                        item.length !== 0\r\n                          ? checkDate\r\n                          : null\r\n                      }\r\n                    >\r\n                      판매 등록\r\n                    </Button>\r\n\r\n                    <Modal open={approveModal}>\r\n                      <Card\r\n                        sx={{\r\n                          width: '40%',\r\n                          border: 1,\r\n                          borderRadius: 1,\r\n                          borderColor: 'grey.main',\r\n                          backgroundColor: '#ffffff',\r\n                          top: '25%',\r\n                          left: '30%'\r\n                        }}\r\n                      >\r\n                        <Box>\r\n                          <Typography sx={{ ml: 3, pt: 2 }} variant=\"h5\">\r\n                            판매 승인하기\r\n                          </Typography>\r\n                        </Box>\r\n                        <Divider sx={{ mt: 2 }} />\r\n                        <FormikProvider value={formik}>\r\n                          <Form autoComplete=\"off\" noValidate onSubmit={handleSubmit} onReset={handleReset}>\r\n                            <Box sx={{ mt: 4, ml: 3, mr: 3 }}>\r\n                              <Stack direction=\"row\" sx={{ mt: 3 }}>\r\n                                <TextField\r\n                                  fullWidth\r\n                                  type=\"text\"\r\n                                  label=\"개인키\"\r\n                                  onChange={handlePrivKey}\r\n                                />\r\n                              </Stack>\r\n                              <Divider sx={{ mt: 4 }} />\r\n                              <Stack direction=\"row\" sx={{ mt: 3, mb: 3 }} justifyContent=\"center\">\r\n                                {loading === false ? (\r\n                                  <Button\r\n                                    size=\"large\"\r\n                                    variant=\"contained\"\r\n                                    sx={{ width: '20%', fontSize: 16 }}\r\n                                    onClick={toggleApprove}\r\n                                  >\r\n                                    취소\r\n                                  </Button>\r\n                                ) : null}\r\n                                <LoadingButton\r\n                                  size=\"large\"\r\n                                  variant=\"contained\"\r\n                                  sx={{ ml: 3, width: '20%', fontSize: 16 }}\r\n                                  loading={loading}\r\n                                  onClick={createSaleContract}\r\n                                >\r\n                                  승인하기\r\n                                </LoadingButton>\r\n                              </Stack>\r\n                            </Box>\r\n                          </Form>\r\n                        </FormikProvider>\r\n                      </Card>\r\n                    </Modal>\r\n                  </Stack>\r\n                </Form>\r\n              </FormikProvider>\r\n            </Container>\r\n          ) : (\r\n            <Container>\r\n              <MotionContainer initial=\"initial\" sx={{ mt: 10 }} open>\r\n                <Box sx={{ maxWidth: 480, margin: 'auto', textAlign: 'center' }}>\r\n                  <motion.div variants={varBounceIn}>\r\n                    <Typography variant=\"h3\" paragraph>\r\n                      잘못된 접근입니다.\r\n                    </Typography>\r\n                  </motion.div>\r\n\r\n                  <Typography sx={{ color: 'text.secondary' }}>\r\n                    이미 판매되고 있는 아이템이거나 정보를 찾을 수 없습니다.\r\n                  </Typography>\r\n\r\n                  <motion.div variants={varBounceIn}>\r\n                    <Box\r\n                      component=\"img\"\r\n                      src=\"/static/illustrations/illustration_register.png\"\r\n                      sx={{ height: 260, mx: 'auto', my: { xs: 5, sm: 10 } }}\r\n                    />\r\n                  </motion.div>\r\n                </Box>\r\n              </MotionContainer>\r\n            </Container>\r\n          )}\r\n        </>\r\n      ) : (\r\n        <Container>\r\n          <MotionContainer initial=\"initial\" sx={{ mt: 10 }} open>\r\n            <Box sx={{ maxWidth: 480, margin: 'auto', textAlign: 'center' }}>\r\n              <motion.div variants={varBounceIn}>\r\n                <Typography variant=\"h3\" paragraph>\r\n                  판매 등록 완료\r\n                </Typography>\r\n              </motion.div>\r\n              <Typography sx={{ color: 'text.secondary' }}>판매 등록이 완료되었습니다.</Typography>\r\n\r\n              <motion.div variants={varBounceIn}>\r\n                <Box\r\n                  component=\"img\"\r\n                  src=\"/static/illustrations/illustration_register.png\"\r\n                  sx={{ height: 260, mx: 'auto', my: { xs: 5, sm: 10 } }}\r\n                />\r\n              </motion.div>\r\n\r\n              <Button to=\"/\" size=\"large\" variant=\"contained\" component={RouterLink}>\r\n                홈으로 돌아가기\r\n              </Button>\r\n            </Box>\r\n          </MotionContainer>\r\n        </Container>\r\n      )}\r\n    </Page>\r\n  );\r\n};\r\n\r\nexport default SaleRegistration;\r\n"]},"metadata":{},"sourceType":"module"}