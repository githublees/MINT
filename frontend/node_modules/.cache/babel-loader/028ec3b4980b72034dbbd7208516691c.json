{"ast":null,"code":"import _toConsumableArray from\"C:/SSAFY/WORKSPACE/NFT/S06P22A106/frontend/node_modules/@babel/runtime/helpers/esm/toConsumableArray.js\";import _asyncToGenerator from\"C:/SSAFY/WORKSPACE/NFT/S06P22A106/frontend/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _slicedToArray from\"C:/SSAFY/WORKSPACE/NFT/S06P22A106/frontend/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import _regeneratorRuntime from\"C:\\\\SSAFY\\\\WORKSPACE\\\\NFT\\\\S06P22A106\\\\frontend\\\\node_modules\\\\@babel\\\\runtime\\\\regenerator\\\\index.js\";import{Box,Container,Typography}from'@mui/material';import{motion}from'framer-motion';import{useEffect,useState}from'react';import{MotionContainer,varBounceIn}from'../components/animate';import axios from'axios';import Web3 from'web3';import COMMON_ABI from'../common/ABI';import COMMON_HEADER from'../common/HeaderType';import getSaleByTokenId from'../common/SaleInfoGetter';import{onResponse}from'../common/ErrorMessage';import Page from'../components/Page';import ItemsList from'../layouts/items/ItemsList';/**\r\n * [구매하기] 화면\r\n */import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";var Items=function Items(){// [변수] 아이템, 컬렉션 유무, 로딩\nvar _useState=useState([]),_useState2=_slicedToArray(_useState,2),item=_useState2[0],setItem=_useState2[1];var _useState3=useState(false),_useState4=_slicedToArray(_useState3,2),isCollection=_useState4[0],setIsCollection=_useState4[1];var _useState5=useState(false),_useState6=_slicedToArray(_useState5,2),loading=_useState6[0],setLoading=_useState6[1];// Web3\nvar web3=new Web3(new Web3.providers.HttpProvider(process.env.REACT_APP_ETHEREUM_RPC_URL));/**\r\n   * [초기 데이터 설정]\r\n   * 화면 첫 렌더링시 판매중인 작품을 조회하는 함수를 호출합니다.\r\n   */useEffect(function(){getItem();},[]);/**\r\n   * PJT Ⅲ - 과제 4: 조회\r\n   * Req.4-F1 구매하기 화면 조회\r\n   * \r\n   * 1. 구매하기 클릭 시 판매 작품을 조회 API를 호출합니다.  \r\n   * 2. 응답으로부터 받은 token id로 Sale 정보를 요청합니다.\r\n   * 3. sale 컨트랙트 주소로 즉시 구매가를 컨트랙트로부터 직접 조회합니다.\r\n   * 3. token id로 NFT 컨트랙트로부터 직접 tokenURI를 조회하여 화면에 표시합니다. \r\n   */var getItem=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){var resultList,resultItem;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:// TODO \nsetLoading(true);resultList=[];resultItem={id:1,image:\"https://edu.ssafy.com/asset/images/logo.png\",hash:\"fake hash\",price:\"fake price\",title:\"fake title\"};resultList.push(resultItem);setItem(resultList);setLoading(false);setIsCollection(true);case 7:case\"end\":return _context.stop();}}},_callee);}));return function getItem(){return _ref.apply(this,arguments);};}();// 카드 화면 생성을 위한 데이터 전달\nvar products=_toConsumableArray(Array(item.length)).map(function(_,index){return{image:item[index].image,title:item[index].title,tokenId:item[index].id,price:item[index].price,hash:item[index].hash};});return/*#__PURE__*/_jsx(Page,{title:\"SSAFY NFT\",maxWidth:\"100%\",minHeight:\"100%\",alignItems:\"center\",display:\"flex\",children:loading===false?/*#__PURE__*/_jsx(_Fragment,{children:isCollection===true?/*#__PURE__*/_jsx(Container,{maxWidth:\"xl\",children:/*#__PURE__*/_jsx(ItemsList,{sx:{mt:1},products:products})}):/*#__PURE__*/_jsx(Container,{children:/*#__PURE__*/_jsx(MotionContainer,{initial:\"initial\",sx:{mt:10},open:true,children:/*#__PURE__*/_jsxs(Box,{sx:{maxWidth:480,margin:'auto',textAlign:'center'},children:[/*#__PURE__*/_jsx(motion.div,{variants:varBounceIn,children:/*#__PURE__*/_jsx(Typography,{variant:\"h3\",paragraph:true,children:\"\\uAC80\\uC0C9 \\uACB0\\uACFC \\uC5C6\\uC74C\"})}),/*#__PURE__*/_jsx(Typography,{sx:{color:'text.secondary'},children:\"\\uD310\\uB9E4\\uB418\\uACE0 \\uC788\\uB294 \\uC544\\uC774\\uD15C\\uC774 \\uC5C6\\uC2B5\\uB2C8\\uB2E4.\"}),/*#__PURE__*/_jsx(motion.div,{variants:varBounceIn,children:/*#__PURE__*/_jsx(Box,{component:\"img\",src:\"/static/illustrations/illustration_register.png\",sx:{height:260,mx:'auto',my:{xs:5,sm:10}}})})]})})})}):/*#__PURE__*/_jsx(Container,{children:/*#__PURE__*/_jsx(MotionContainer,{initial:\"initial\",sx:{mt:10},open:true,children:/*#__PURE__*/_jsxs(Box,{sx:{maxWidth:480,margin:'auto',textAlign:'center'},children:[/*#__PURE__*/_jsx(motion.div,{variants:varBounceIn,children:/*#__PURE__*/_jsx(Typography,{variant:\"h3\",paragraph:true,children:\"\\uC544\\uC774\\uD15C \\uB85C\\uB529\\uC911...\"})}),/*#__PURE__*/_jsx(Typography,{sx:{color:'text.secondary'},children:\"\\uD310\\uB9E4\\uB418\\uACE0 \\uC788\\uB294 \\uC544\\uC774\\uD15C\\uC744 \\uAC80\\uC0C9\\uD558\\uACE0 \\uC788\\uC2B5\\uB2C8\\uB2E4.\"}),/*#__PURE__*/_jsx(motion.div,{variants:varBounceIn,children:/*#__PURE__*/_jsx(Box,{component:\"img\",src:\"/static/illustrations/illustration_register.png\",sx:{height:260,mx:'auto',my:{xs:5,sm:10}}})})]})})})});};export default Items;","map":{"version":3,"sources":["C:/SSAFY/WORKSPACE/NFT/S06P22A106/frontend/src/pages/Items.js"],"names":["Box","Container","Typography","motion","useEffect","useState","MotionContainer","varBounceIn","axios","Web3","COMMON_ABI","COMMON_HEADER","getSaleByTokenId","onResponse","Page","ItemsList","Items","item","setItem","isCollection","setIsCollection","loading","setLoading","web3","providers","HttpProvider","process","env","REACT_APP_ETHEREUM_RPC_URL","getItem","resultList","resultItem","id","image","hash","price","title","push","products","Array","length","map","_","index","tokenId","mt","maxWidth","margin","textAlign","color","height","mx","my","xs","sm"],"mappings":"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","sourcesContent":["import { Box, Container, Typography } from '@mui/material';\r\nimport { motion } from 'framer-motion';\r\nimport { useEffect, useState } from 'react';\r\nimport { MotionContainer, varBounceIn } from '../components/animate';\r\nimport axios from 'axios';\r\nimport Web3 from 'web3';\r\nimport COMMON_ABI from '../common/ABI';\r\nimport COMMON_HEADER from '../common/HeaderType';\r\nimport getSaleByTokenId from '../common/SaleInfoGetter';\r\nimport { onResponse } from '../common/ErrorMessage';\r\nimport Page from '../components/Page';\r\nimport ItemsList from '../layouts/items/ItemsList';\r\n\r\n/**\r\n * [구매하기] 화면\r\n */\r\nconst Items = () => {\r\n  // [변수] 아이템, 컬렉션 유무, 로딩\r\n  const [item, setItem] = useState([]);\r\n  const [isCollection, setIsCollection] = useState(false);\r\n  const [loading, setLoading] = useState(false);\r\n\r\n  // Web3\r\n  const web3 = new Web3(new Web3.providers.HttpProvider(process.env.REACT_APP_ETHEREUM_RPC_URL));\r\n\r\n  /**\r\n   * [초기 데이터 설정]\r\n   * 화면 첫 렌더링시 판매중인 작품을 조회하는 함수를 호출합니다.\r\n   */\r\n  useEffect(() => {\r\n    getItem();\r\n  }, []);\r\n\r\n\r\n  /**\r\n   * PJT Ⅲ - 과제 4: 조회\r\n   * Req.4-F1 구매하기 화면 조회\r\n   * \r\n   * 1. 구매하기 클릭 시 판매 작품을 조회 API를 호출합니다.  \r\n   * 2. 응답으로부터 받은 token id로 Sale 정보를 요청합니다.\r\n   * 3. sale 컨트랙트 주소로 즉시 구매가를 컨트랙트로부터 직접 조회합니다.\r\n   * 3. token id로 NFT 컨트랙트로부터 직접 tokenURI를 조회하여 화면에 표시합니다. \r\n   */\r\n  const getItem = async () => {\r\n    // TODO \r\n    setLoading(true);\r\n    \r\n    const resultList = [];\r\n    const resultItem = {\r\n      id: 1,\r\n      image: \"https://edu.ssafy.com/asset/images/logo.png\",\r\n      hash: \"fake hash\",\r\n      price: \"fake price\",\r\n      title: \"fake title\"\r\n    };\r\n    resultList.push(resultItem);\r\n    setItem(resultList);\r\n    setLoading(false);\r\n    setIsCollection(true);\r\n  };\r\n\r\n  // 카드 화면 생성을 위한 데이터 전달\r\n  const products = [...Array(item.length)].map((_, index) => {\r\n    return {\r\n      image: item[index].image,\r\n      title: item[index].title,\r\n      tokenId: item[index].id,\r\n      price: item[index].price,\r\n      hash: item[index].hash\r\n    };\r\n  });\r\n\r\n  return (\r\n    <Page title=\"SSAFY NFT\" maxWidth=\"100%\" minHeight=\"100%\" alignItems=\"center\" display=\"flex\">\r\n      {loading === false ? (\r\n        <>\r\n          {isCollection === true ? (\r\n            <Container maxWidth=\"xl\">\r\n              <ItemsList sx={{ mt: 1 }} products={products} />\r\n            </Container>\r\n          ) : (\r\n            <Container>\r\n              <MotionContainer initial=\"initial\" sx={{ mt: 10 }} open>\r\n                <Box sx={{ maxWidth: 480, margin: 'auto', textAlign: 'center' }}>\r\n                  <motion.div variants={varBounceIn}>\r\n                    <Typography variant=\"h3\" paragraph>\r\n                      검색 결과 없음\r\n                    </Typography>\r\n                  </motion.div>\r\n                  <Typography sx={{ color: 'text.secondary' }}>\r\n                    판매되고 있는 아이템이 없습니다.\r\n                  </Typography>\r\n\r\n                  <motion.div variants={varBounceIn}>\r\n                    <Box\r\n                      component=\"img\"\r\n                      src=\"/static/illustrations/illustration_register.png\"\r\n                      sx={{ height: 260, mx: 'auto', my: { xs: 5, sm: 10 } }}\r\n                    />\r\n                  </motion.div>\r\n                </Box>\r\n              </MotionContainer>\r\n            </Container>\r\n          )}\r\n        </>\r\n      ) : (\r\n        <Container>\r\n          <MotionContainer initial=\"initial\" sx={{ mt: 10 }} open>\r\n            <Box sx={{ maxWidth: 480, margin: 'auto', textAlign: 'center' }}>\r\n              <motion.div variants={varBounceIn}>\r\n                <Typography variant=\"h3\" paragraph>\r\n                  아이템 로딩중...\r\n                </Typography>\r\n              </motion.div>\r\n              <Typography sx={{ color: 'text.secondary' }}>\r\n                판매되고 있는 아이템을 검색하고 있습니다.\r\n              </Typography>\r\n\r\n              <motion.div variants={varBounceIn}>\r\n                <Box\r\n                  component=\"img\"\r\n                  src=\"/static/illustrations/illustration_register.png\"\r\n                  sx={{ height: 260, mx: 'auto', my: { xs: 5, sm: 10 } }}\r\n                />\r\n              </motion.div>\r\n            </Box>\r\n          </MotionContainer>\r\n        </Container>\r\n      )}\r\n    </Page>\r\n  );\r\n};\r\n\r\nexport default Items;\r\n"]},"metadata":{},"sourceType":"module"}