{"ast":null,"code":"import _objectSpread from\"C:/SSAFY/WORKSPACE/NFT/S06P22A106/frontend/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import _asyncToGenerator from\"C:/SSAFY/WORKSPACE/NFT/S06P22A106/frontend/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _slicedToArray from\"C:/SSAFY/WORKSPACE/NFT/S06P22A106/frontend/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import _regeneratorRuntime from\"C:\\\\SSAFY\\\\WORKSPACE\\\\NFT\\\\S06P22A106\\\\frontend\\\\node_modules\\\\@babel\\\\runtime\\\\regenerator\\\\index.js\";import*as Yup from'yup';import{Link as RouterLink}from'react-router-dom';import{Box,Card,Typography,Stack,Button,Modal,Link,Divider,TextField}from'@mui/material';import{styled}from'@mui/material/styles';import{useState}from'react';import{Form,FormikProvider,useFormik}from'formik';import{LoadingButton}from'@mui/lab';import Label from'../../components/Label';import axios from'axios';import Web3 from'web3';import COMMON_HEADER from'../../common/HeaderType';import COMMON_ABI from'../../common/ABI';import getByTokenId from'../../common/SaleInfoGetter';import{onResponse,onContractCall,onInvalidAddress}from'../../common/ErrorMessage';import sendTransaction from'../../utils/TxSender';import getAddressFrom from'../../utils/AddressExtractor';// 이미지 스타일\nimport{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";var ImgStyle=styled('img')({top:0,width:'100%',height:'100%',objectFit:'contain',position:'absolute'});/**\r\n * 작품의 개별 카드\r\ns */export default function ItemCard(_ref){var product=_ref.product;// [변수] 이미지, 제목, 판매 상태, 토큰 ID, 판매 종료 유무, 클릭 버튼명, 로딩\nvar image=product.image,title=product.title,onSale=product.onSale,tokenId=product.tokenId,ended=product.ended;var _useState=useState(''),_useState2=_slicedToArray(_useState,2),action=_useState2[0],setAction=_useState2[1];var _useState3=useState(false),_useState4=_slicedToArray(_useState3,2),loading=_useState4[0],setLoading=_useState4[1];// 판매 승인 모달\nvar _useState5=useState(false),_useState6=_slicedToArray(_useState5,2),approveModal=_useState6[0],setApproveModal=_useState6[1];// Web3\nvar web3=new Web3(new Web3.providers.HttpProvider(process.env.REACT_APP_ETHEREUM_RPC_URL));// 타이핑 헬퍼\nvar typeSchema=Yup.object().shape({privKey:Yup.string().required('개인키를 입력해주세요.')});// 입력 데이터 처리\nvar formik=useFormik({initialValues:{privKey:''},validationSchema:typeSchema,onSubmit:function onSubmit(value){checkAddress(value.privKey);}});var handleSubmit=formik.handleSubmit,handleReset=formik.handleReset,getFieldProps=formik.getFieldProps;// 모달 핸들링 (판매 승인)\nvar toggleApprove=function toggleApprove(act){setAction(act);setApproveModal(!approveModal);};/**\r\n   * PJT Ⅲ - 과제 3: 거래 진행\r\n   * Req.3-F3 취소하기\r\n   * \r\n   * 컨트랙트 정상 호출 후 백엔드에 상태를 업데이트합니다. \r\n   * @param {*} id saleId  \r\n   */var cancelItem=/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(id){return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:// TODO\nsetLoading(false);case 1:case\"end\":return _context.stop();}}},_callee);}));return function cancelItem(_x){return _ref2.apply(this,arguments);};}();/**\r\n   * PJT Ⅲ - 과제 3: 거래 진행\r\n   * Req.3-F4 완료하기\r\n   * \r\n   * 컨트랙트 정상 호출 후 백엔드에 상태를 업데이트합니다. \r\n   * 최종 구매자의 정보가 기록됩니다.\r\n   * @param {*} pubKey 구매자 주소\r\n   */var completeItem=/*#__PURE__*/function(){var _ref3=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee2(pubKey){return _regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:// TODO\nsetLoading(false);case 1:case\"end\":return _context2.stop();}}},_callee2);}));return function completeItem(_x2){return _ref3.apply(this,arguments);};}();return/*#__PURE__*/_jsxs(Card,{children:[/*#__PURE__*/_jsxs(Box,{sx:{pt:'100%',position:'relative'},children:[onSale&&/*#__PURE__*/_jsx(Label,{variant:\"filled\",color:onSale==='0'&&'secondary'||'warning',sx:{zIndex:9,top:16,left:16,position:'absolute'},children:onSale==='0'?'보유':'판매중'}),/*#__PURE__*/_jsx(ImgStyle,{src:image})]}),/*#__PURE__*/_jsxs(Stack,{spacing:2,sx:{p:3},children:[/*#__PURE__*/_jsx(Link,{to:\"/items/buy/\".concat(tokenId),color:\"inherit\",underline:\"hover\",component:RouterLink,children:/*#__PURE__*/_jsx(Typography,{sx:{mb:1},variant:\"subtitle1\",noWrap:true,children:title})}),onSale==='0'?/*#__PURE__*/_jsx(Button,{to:\"/register/sale/\".concat(tokenId),variant:\"contained\",component:RouterLink,children:\"\\uD310\\uB9E4\\uD558\\uAE30\"}):/*#__PURE__*/_jsx(_Fragment,{children:ended===false?/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(Button,{variant:\"contained\",onClick:function onClick(){return toggleApprove('cancel');},children:\"\\uCDE8\\uC18C\\uD558\\uAE30\"}),/*#__PURE__*/_jsx(Button,{color:\"inherit\",variant:\"contained\",children:\"\\uC644\\uB8CC\\uD558\\uAE30\"})]}):/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(Button,{color:\"inherit\",variant:\"contained\",children:\"\\uCDE8\\uC18C\\uD558\\uAE30\"}),/*#__PURE__*/_jsx(Button,{variant:\"contained\",onClick:function onClick(){return toggleApprove('complete');},children:\"\\uC644\\uB8CC\\uD558\\uAE30\"})]})}),/*#__PURE__*/_jsx(Modal,{open:approveModal,children:/*#__PURE__*/_jsxs(Card,{sx:{width:'40%',border:1,borderRadius:1,borderColor:'grey.main',backgroundColor:'#ffffff',top:'25%',left:'30%'},children:[/*#__PURE__*/_jsx(Box,{children:/*#__PURE__*/_jsxs(Typography,{sx:{ml:3,pt:2},variant:\"h5\",children:[\"\\uD310\\uB9E4 \",action==='cancel'?'취소':'완료',\"\\uD558\\uAE30\"]})}),/*#__PURE__*/_jsx(Divider,{sx:{mt:2}}),/*#__PURE__*/_jsx(FormikProvider,{value:formik,children:/*#__PURE__*/_jsx(Form,{autoComplete:\"off\",noValidate:true,onSubmit:handleSubmit,onReset:handleReset,children:/*#__PURE__*/_jsxs(Box,{sx:{mt:4,ml:3,mr:3},children:[/*#__PURE__*/_jsx(Stack,{direction:\"row\",sx:{mt:3},children:/*#__PURE__*/_jsx(TextField,_objectSpread({fullWidth:true,type:\"text\",label:\"\\uAC1C\\uC778\\uD0A4\"},getFieldProps('privKey')))}),/*#__PURE__*/_jsx(Divider,{sx:{mt:4}}),/*#__PURE__*/_jsxs(Stack,{direction:\"row\",sx:{mt:3,mb:3},justifyContent:\"center\",children:[loading===false?/*#__PURE__*/_jsx(Button,{size:\"large\",variant:\"contained\",sx:{width:'15%',fontSize:16},onClick:toggleApprove,children:\"\\uCDE8\\uC18C\"}):null,/*#__PURE__*/_jsxs(LoadingButton,{size:\"large\",variant:\"contained\",type:\"submit\",sx:{ml:3,width:'15%',fontSize:16},loading:loading,children:[action==='cancel'?'취소':'완료',\"\\uD558\\uAE30\"]})]})]})})})]})})]})]});}","map":{"version":3,"sources":["C:/SSAFY/WORKSPACE/NFT/S06P22A106/frontend/src/layouts/whosart/ItemCard.js"],"names":["Yup","Link","RouterLink","Box","Card","Typography","Stack","Button","Modal","Divider","TextField","styled","useState","Form","FormikProvider","useFormik","LoadingButton","Label","axios","Web3","COMMON_HEADER","COMMON_ABI","getByTokenId","onResponse","onContractCall","onInvalidAddress","sendTransaction","getAddressFrom","ImgStyle","top","width","height","objectFit","position","ItemCard","product","image","title","onSale","tokenId","ended","action","setAction","loading","setLoading","approveModal","setApproveModal","web3","providers","HttpProvider","process","env","REACT_APP_ETHEREUM_RPC_URL","typeSchema","object","shape","privKey","string","required","formik","initialValues","validationSchema","onSubmit","value","checkAddress","handleSubmit","handleReset","getFieldProps","toggleApprove","act","cancelItem","id","completeItem","pubKey","pt","zIndex","left","p","mb","border","borderRadius","borderColor","backgroundColor","ml","mt","mr","fontSize"],"mappings":"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","sourcesContent":["import * as Yup from 'yup';\r\nimport PropTypes from 'prop-types';\r\nimport { Link as RouterLink } from 'react-router-dom';\r\nimport { Box, Card, Typography, Stack, Button, Modal, Link, Divider, TextField } from '@mui/material';\r\nimport { styled } from '@mui/material/styles';\r\nimport { useState } from 'react';\r\nimport { Form, FormikProvider, useFormik } from 'formik';\r\nimport { LoadingButton } from '@mui/lab';\r\nimport Label from '../../components/Label';\r\nimport axios from 'axios';\r\nimport Web3 from 'web3';\r\nimport COMMON_HEADER from '../../common/HeaderType';\r\nimport COMMON_ABI from '../../common/ABI';\r\nimport getByTokenId from '../../common/SaleInfoGetter';\r\nimport { onResponse, onContractCall, onInvalidAddress } from '../../common/ErrorMessage';\r\nimport sendTransaction from '../../utils/TxSender';\r\nimport getAddressFrom from '../../utils/AddressExtractor';\r\n\r\n// 이미지 스타일\r\nconst ImgStyle = styled('img')({\r\n  top: 0,\r\n  width: '100%',\r\n  height: '100%',\r\n  objectFit: 'contain',\r\n  position: 'absolute'\r\n});\r\n\r\nItemCard.propTypes = {\r\n  product: PropTypes.object\r\n};\r\n\r\n\r\n/**\r\n * 작품의 개별 카드\r\ns */\r\nexport default function ItemCard({ product }) {\r\n  // [변수] 이미지, 제목, 판매 상태, 토큰 ID, 판매 종료 유무, 클릭 버튼명, 로딩\r\n  const { image, title, onSale, tokenId, ended } = product;\r\n  const [action, setAction] = useState('');\r\n  const [loading, setLoading] = useState(false);\r\n\r\n  // 판매 승인 모달\r\n  const [approveModal, setApproveModal] = useState(false);\r\n\r\n  // Web3\r\n  const web3 = new Web3(new Web3.providers.HttpProvider(process.env.REACT_APP_ETHEREUM_RPC_URL));\r\n\r\n  // 타이핑 헬퍼\r\n  const typeSchema = Yup.object().shape({\r\n    privKey: Yup.string().required('개인키를 입력해주세요.')\r\n  });\r\n\r\n  // 입력 데이터 처리\r\n  const formik = useFormik({\r\n    initialValues: {\r\n      privKey: ''\r\n    },\r\n    validationSchema: typeSchema,\r\n    onSubmit: (value) => {\r\n      checkAddress(value.privKey);\r\n    }\r\n  });\r\n  const { handleSubmit, handleReset, getFieldProps } = formik;\r\n\r\n  // 모달 핸들링 (판매 승인)\r\n  const toggleApprove = (act) => {\r\n    setAction(act);\r\n    setApproveModal(!approveModal);\r\n  };\r\n  \r\n  /**\r\n   * PJT Ⅲ - 과제 3: 거래 진행\r\n   * Req.3-F3 취소하기\r\n   * \r\n   * 컨트랙트 정상 호출 후 백엔드에 상태를 업데이트합니다. \r\n   * @param {*} id saleId  \r\n   */\r\n  const cancelItem = async (id) => {\r\n    // TODO\r\n    setLoading(false);\r\n  };\r\n\r\n  /**\r\n   * PJT Ⅲ - 과제 3: 거래 진행\r\n   * Req.3-F4 완료하기\r\n   * \r\n   * 컨트랙트 정상 호출 후 백엔드에 상태를 업데이트합니다. \r\n   * 최종 구매자의 정보가 기록됩니다.\r\n   * @param {*} pubKey 구매자 주소\r\n   */\r\n  const completeItem = async (pubKey) => {\r\n    // TODO\r\n    setLoading(false);\r\n  };\r\n\r\n  return (\r\n    <Card>\r\n      <Box sx={{ pt: '100%', position: 'relative' }}>\r\n        {onSale && (\r\n          <Label\r\n            variant=\"filled\"\r\n            color={(onSale === '0' && 'secondary') || 'warning'}\r\n            sx={{\r\n              zIndex: 9,\r\n              top: 16,\r\n              left: 16,\r\n              position: 'absolute'\r\n            }}\r\n          >\r\n            {onSale === '0' ? '보유' : '판매중'}\r\n          </Label>\r\n        )}\r\n        <ImgStyle src={image} />\r\n      </Box>\r\n\r\n      <Stack spacing={2} sx={{ p: 3 }}>\r\n        <Link\r\n          to={`/items/buy/${tokenId}`}\r\n          color=\"inherit\"\r\n          underline=\"hover\"\r\n          component={RouterLink}\r\n        >\r\n          <Typography sx={{ mb: 1 }} variant=\"subtitle1\" noWrap>\r\n            {title}\r\n          </Typography>\r\n        </Link>\r\n        {/**\r\n         * PJT Ⅲ - 과제 3: 거래 진행  \r\n         * Req. 3-F5 판매하기\r\n         * \r\n         * 판매 중이 아닌 상품을 새롭게 판매 등록할 수 있습니다.\r\n         */}\r\n        {onSale === '0' ? (\r\n          <Button to={`/register/sale/${tokenId}`} variant=\"contained\" component={RouterLink}>\r\n            판매하기\r\n          </Button>\r\n        ) : (\r\n          <>\r\n          {/*\r\n            * PJT Ⅲ - 과제 2: 거래 진행  \r\n            * WhosArt.js 요청 후 전달 받은 [종료 여부]에 따라 버튼을 추가합니다.  \r\n            */}\r\n            {ended === false ? (\r\n              <>\r\n                <Button variant=\"contained\" onClick={() => toggleApprove('cancel')}>\r\n                  취소하기\r\n                </Button>\r\n                <Button color=\"inherit\" variant=\"contained\">\r\n                  완료하기\r\n                </Button>\r\n              </>\r\n            ) : (\r\n              <>\r\n                <Button color=\"inherit\" variant=\"contained\">\r\n                  취소하기\r\n                </Button>\r\n                <Button variant=\"contained\" onClick={() => toggleApprove('complete')}>\r\n                  완료하기\r\n                </Button>\r\n              </>\r\n            )}\r\n          </>\r\n        )}\r\n\r\n        <Modal open={approveModal}>\r\n          <Card\r\n            sx={{\r\n              width: '40%',\r\n              border: 1,\r\n              borderRadius: 1,\r\n              borderColor: 'grey.main',\r\n              backgroundColor: '#ffffff',\r\n              top: '25%',\r\n              left: '30%'\r\n            }}\r\n          >\r\n            <Box>\r\n              <Typography sx={{ ml: 3, pt: 2 }} variant=\"h5\">\r\n                판매 {action === 'cancel' ? '취소' : '완료'}하기\r\n              </Typography>\r\n            </Box>\r\n            <Divider sx={{ mt: 2 }} />\r\n            <FormikProvider value={formik}>\r\n              <Form autoComplete=\"off\" noValidate onSubmit={handleSubmit} onReset={handleReset}>\r\n                <Box sx={{ mt: 4, ml: 3, mr: 3 }}>\r\n                  <Stack direction=\"row\" sx={{ mt: 3 }}>\r\n                    <TextField fullWidth type=\"text\" label=\"개인키\" {...getFieldProps('privKey')} />\r\n                  </Stack>\r\n                  <Divider sx={{ mt: 4 }} />\r\n                  <Stack direction=\"row\" sx={{ mt: 3, mb: 3 }} justifyContent=\"center\">\r\n                    {loading === false ? (\r\n                      <Button\r\n                        size=\"large\"\r\n                        variant=\"contained\"\r\n                        sx={{ width: '15%', fontSize: 16 }}\r\n                        onClick={toggleApprove}\r\n                      >\r\n                        취소\r\n                      </Button>\r\n                    ) : null}\r\n                    <LoadingButton\r\n                      size=\"large\"\r\n                      variant=\"contained\"\r\n                      type=\"submit\"\r\n                      sx={{ ml: 3, width: '15%', fontSize: 16 }}\r\n                      loading={loading}\r\n                    >\r\n                      {action === 'cancel' ? '취소' : '완료'}하기\r\n                    </LoadingButton>\r\n                  </Stack>\r\n                </Box>\r\n              </Form>\r\n            </FormikProvider>\r\n          </Card>\r\n        </Modal>\r\n      </Stack>\r\n    </Card>\r\n  );\r\n}\r\n"]},"metadata":{},"sourceType":"module"}