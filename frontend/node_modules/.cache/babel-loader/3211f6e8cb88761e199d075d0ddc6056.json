{"ast":null,"code":"import _objectSpread from\"C:/SSAFY/WORKSPACE/NFT/S06P22A106/frontend/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import _asyncToGenerator from\"C:/SSAFY/WORKSPACE/NFT/S06P22A106/frontend/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _slicedToArray from\"C:/SSAFY/WORKSPACE/NFT/S06P22A106/frontend/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import _regeneratorRuntime from\"C:\\\\SSAFY\\\\WORKSPACE\\\\NFT\\\\S06P22A106\\\\frontend\\\\node_modules\\\\@babel\\\\runtime\\\\regenerator\\\\index.js\";import*as Yup from'yup';import{Box,Button,Card,CardContent,CardHeader,Container,Divider,Link,Modal,Stack,TextField,Typography}from'@mui/material';import{useEffect,useState}from'react';import{styled}from'@mui/material/styles';import{Link as RouterLink,useLocation}from'react-router-dom';import{Form,FormikProvider,useFormik}from'formik';import{LoadingButton}from'@mui/lab';import axios from'axios';import Web3 from'web3';import moment from'moment';import Page from'../components/Page';import COMMON_HEADER from'../common/HeaderType';import COMMON_ABI from'../common/ABI';import getSaleInfoBy from'../common/SaleInfoGetter';import{onResponse,onContractCall,onInvalidAddress}from'../common/ErrorMessage';import getAddressFrom from'../utils/AddressExtractor';import sendTransaction from'../utils/TxSender';import{convertToAccountingFormat}from'../utils/NumberFormatter';import{motion}from'framer-motion';import{MotionContainer,varBounceIn}from'../components/animate';// 이미지 스타일\nimport{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";var ImgStyle=styled('img')({top:0,width:'100%',height:'100%',objectFit:'contain',position:'absolute'});/**\r\n * [구매(거래)]를 위한 화면\r\n */var ItemPurchase=function ItemPurchase(){// [변수] 토큰 ID (URL 파라미터 사용)\nvar tokenId=useLocation().pathname.substring(11);// [변수] 아이템, 작품명, 아이템 소개, 판매자, 판매자 주소, 전시 종료일, 거래 가능 토큰 주소, 심볼, 즉시 구매가, 최소 제안가,\n//       최고 제안가, 최고 제안자, 잔액, 토큰 URI, 컬렉션 유무, 처리 완료 여부, 현재 시간, 판매 종료 시간, 판매 종료 여부,\n//       판매중 여부\nvar _useState=useState(''),_useState2=_slicedToArray(_useState,2),item=_useState2[0],setItem=_useState2[1];var _useState3=useState('작품명'),_useState4=_slicedToArray(_useState3,2),itemName=_useState4[0],setItemName=_useState4[1];var _useState5=useState('아이템 소개'),_useState6=_slicedToArray(_useState5,2),description=_useState6[0],setDescription=_useState6[1];var _useState7=useState(''),_useState8=_slicedToArray(_useState7,2),author=_useState8[0],setAuthor=_useState8[1];var _useState9=useState(''),_useState10=_slicedToArray(_useState9,2),authorAdr=_useState10[0],setAuthorAdr=_useState10[1];var _useState11=useState(''),_useState12=_slicedToArray(_useState11,2),dueDate=_useState12[0],setDueDate=_useState12[1];var _useState13=useState(''),_useState14=_slicedToArray(_useState13,2),contract=_useState14[0],setContract=_useState14[1];var symbol='SSF';var _useState15=useState('0'),_useState16=_slicedToArray(_useState15,2),price=_useState16[0],setPrice=_useState16[1];var _useState17=useState('0'),_useState18=_slicedToArray(_useState17,2),minPrice=_useState18[0],setMinPrice=_useState18[1];var _useState19=useState('0'),_useState20=_slicedToArray(_useState19,2),maxPrice=_useState20[0],setMaxPrice=_useState20[1];var _useState21=useState(''),_useState22=_slicedToArray(_useState21,2),proposer=_useState22[0],setProposer=_useState22[1];var _useState23=useState('0'),_useState24=_slicedToArray(_useState23,2),balance=_useState24[0],setBalance=_useState24[1];var _useState25=useState(''),_useState26=_slicedToArray(_useState25,2),uri=_useState26[0],setUri=_useState26[1];var _useState27=useState(false),_useState28=_slicedToArray(_useState27,2),isCollection=_useState28[0],setIsCollection=_useState28[1];var _useState29=useState(false),_useState30=_slicedToArray(_useState29,2),isComplete=_useState30[0],setIsComplete=_useState30[1];var currentTime=parseInt((moment()/1000).toFixed(0));var _useState31=useState('0'),_useState32=_slicedToArray(_useState31,2),endDate=_useState32[0],setEndDate=_useState32[1];var _useState33=useState(''),_useState34=_slicedToArray(_useState33,2),ended=_useState34[0],setEnded=_useState34[1];var _useState35=useState(true),_useState36=_slicedToArray(_useState35,2),saleYn=_useState36[0],setSaleYn=_useState36[1];// [변수] 즉시 구매 모달 (모달, 지갑 주소, 개인키, 로딩)\nvar _useState37=useState(false),_useState38=_slicedToArray(_useState37,2),instantModal=_useState38[0],setInstantModal=_useState38[1];var _useState39=useState(''),_useState40=_slicedToArray(_useState39,2),address=_useState40[0],setAddress=_useState40[1];var _useState41=useState(''),_useState42=_slicedToArray(_useState41,2),privKey=_useState42[0],setPrivKey=_useState42[1];var _useState43=useState(false),_useState44=_slicedToArray(_useState43,2),loading=_useState44[0],setLoading=_useState44[1];// [변수] 새로운 금액 제안 모달 (모달)\nvar _useState45=useState(false),_useState46=_slicedToArray(_useState45,2),proposeModal=_useState46[0],setProposeModal=_useState46[1];// Web3\nvar web3=new Web3(new Web3.providers.HttpProvider(process.env.REACT_APP_ETHEREUM_RPC_URL));/**\r\n   * [초기 데이터 설정]\r\n   * 화면 첫 렌더링시 판매되고 있는 작품 상세 정보를 조회합니다.\r\n   */useEffect(function(){getItemDetail();},[]);// 모달 핸들링 (즉시 구매)\nvar toggleInstant=function toggleInstant(){setAddress('');setBalance('0');setPrivKey('');setInstantModal(!instantModal);};// 지갑 주소 입력 핸들링\nvar handleAddress=function handleAddress(e){setAddress(e.target.value);setBalance('0');};// 개인키 입력 핸들링\nvar handlePriv=function handlePriv(e){setPrivKey(e.target.value);};// 모달 핸들링 (금액 제안)\nvar toggleModal=function toggleModal(){setAddress('');setBalance('0');setPrivKey('');setProposeModal(!proposeModal);};// 타이핑 헬퍼\nvar typeSchema=Yup.object().shape({price:Yup.number().positive().integer().required()});// 입력 데이터 (즉시 구매, 금액 제안) 처리\nvar formik=useFormik({initialValues:{price:''},validationSchema:typeSchema,onSubmit:function onSubmit(){}});var getFieldProps=formik.getFieldProps;/**\r\n   * PJT Ⅱ - 과제 2: 작품 조회\r\n   * Req. 2-F3 작품 상세 조회\r\n   *\r\n   * token id로 작품의 상세 정보를 조회합니다.\r\n   * 작품의 tokenURI를 NFT로부터 직접 조회합니다.\r\n   *\r\n   * PJT Ⅲ - 과제 2: 작품 판매 등록\r\n   * Req. 2-F3 작품 상세 화면 수정\r\n   *\r\n   * 작품의 판매 등록 여부에 따라 sale 컨트랙트를 호출할 수 있는 버튼\r\n   * (제안하기, 구매하기)이 추가되어야 합니다.\r\n   *\r\n   */var getItemDetail=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:// TODO \nsetIsCollection(false);case 1:case\"end\":return _context.stop();}}},_callee);}));return function getItemDetail(){return _ref.apply(this,arguments);};}();/**\r\n  * PJT Ⅲ - 과제 3: 거래 진행\r\n  * Req. 3-F1 제안하기\r\n  * \r\n  * 1. bid 컨트랙트 함수 호출 파라메터를 지정합니다.\r\n  * 2. Sale 컨트랙트가 구매자의 SSAFY 토큰을 상대방에게 전송할 수 있는 권한을 부여합니다. (approveERC20Token() 호출)\r\n  * 2. 정상 호출 후, Sale 컨트랙트의 purchase() 함수를 호출합니다. \r\n  */var tryBid=function tryBid(){// TODO\nsetLoading(false);};/**\r\n   * PJT Ⅲ - 과제 3: 거래 진행\r\n   * Req. 3-F2 구매하기\r\n   * \r\n   * 1. Sale 컨트랙트가 구매자의 SSAFY 토큰을 상대방에게 전송할 수 있는 권한을 부여합니다.\r\n   * 2. 정상 호출 후, Sale 컨트랙트의 purchase() 함수를 호출합니다. \r\n   * 3. 정상 호출 후 buyer 정보를 백엔드에 업데이트합니다.\r\n   */var tryPurchase=/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee2(){return _regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:// TODO \nsetLoading(false);case 1:case\"end\":return _context2.stop();}}},_callee2);}));return function tryPurchase(){return _ref2.apply(this,arguments);};}();return/*#__PURE__*/_jsx(Page,{title:\"SSAFY NFT\",maxWidth:\"100%\",minHeight:\"100%\",children:isCollection===true?/*#__PURE__*/_jsx(_Fragment,{children:isComplete===false?/*#__PURE__*/_jsx(_Fragment,{children:/*#__PURE__*/_jsxs(Stack,{direction:\"row\",justifyContent:\"center\",sx:{mt:4},children:[/*#__PURE__*/_jsx(Stack,{width:\"25%\",children:/*#__PURE__*/_jsxs(Card,{children:[/*#__PURE__*/_jsx(Box,{sx:{pt:'100%',position:'relative'},children:/*#__PURE__*/_jsx(ImgStyle,{src:item.length!==0?item:null})}),/*#__PURE__*/_jsx(Divider,{}),/*#__PURE__*/_jsxs(Stack,{spacing:2,children:[/*#__PURE__*/_jsx(Typography,{variant:\"h4\",sx:{pt:3,pl:3,pr:3},children:itemName}),/*#__PURE__*/_jsx(Typography,{sx:{color:'text.secondary',p:3},children:description})]})]})}),/*#__PURE__*/_jsx(Stack,{sx:{ml:10},width:\"50%\",children:/*#__PURE__*/_jsxs(Card,{children:[/*#__PURE__*/_jsx(CardHeader,{sx:{ml:1,mb:2},title:\"\\uC791\\uD488 \\uC815\\uBCF4\"}),/*#__PURE__*/_jsx(Divider,{}),/*#__PURE__*/_jsxs(CardContent,{sx:{ml:1,mr:1,pt:4},children:[/*#__PURE__*/_jsxs(Stack,{direction:\"row\",children:[/*#__PURE__*/_jsx(Typography,{sx:{fontSize:18},children:\"\\uC791\\uD488 \\uC774\\uB984 : \"}),/*#__PURE__*/_jsx(Typography,{sx:{ml:1},variant:\"h6\",children:itemName})]}),/*#__PURE__*/_jsxs(Stack,{direction:\"row\",sx:{mt:3},children:[/*#__PURE__*/_jsx(Typography,{sx:{fontSize:18},children:\"\\uC791\\uAC00\\uBA85 : \"}),/*#__PURE__*/_jsx(Typography,{sx:{ml:1},variant:\"h6\",children:author})]}),/*#__PURE__*/_jsxs(Stack,{direction:\"row\",sx:{mt:3,mb:4},children:[/*#__PURE__*/_jsx(Typography,{sx:{fontSize:18},children:\"\\uC124\\uBA85 : \"}),/*#__PURE__*/_jsx(Typography,{sx:{ml:1},variant:\"h6\",children:description})]}),/*#__PURE__*/_jsxs(Stack,{direction:\"row\",sx:{mt:3,mb:4},children:[/*#__PURE__*/_jsx(Typography,{sx:{fontSize:18},children:\"TokenURI : \"}),/*#__PURE__*/_jsx(Typography,{sx:{ml:1},variant:\"h6\",children:uri})]}),/*#__PURE__*/_jsx(Divider,{}),/*#__PURE__*/_jsxs(Stack,{direction:\"row\",sx:{mt:4},children:[/*#__PURE__*/_jsx(Typography,{sx:{fontSize:18},children:\"\\uC18C\\uC720\\uC790 : \"}),/*#__PURE__*/_jsx(Typography,{sx:{ml:1,mr:2},variant:\"h6\",children:authorAdr}),authorAdr.length!==0?/*#__PURE__*/_jsx(Link,{underline:\"none\",to:\"/whosart/\".concat(authorAdr),component:RouterLink,children:\"(\\uCF5C\\uB809\\uC158 \\uBCF4\\uAE30)\"}):null]}),saleYn===true?/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsxs(Stack,{direction:\"row\",sx:{mt:3},children:[/*#__PURE__*/_jsx(Typography,{sx:{fontSize:18},children:\"\\uC804\\uC2DC \\uC885\\uB8CC : \"}),/*#__PURE__*/_jsx(Typography,{sx:{ml:1},variant:\"h6\",children:dueDate})]}),/*#__PURE__*/_jsxs(Stack,{direction:\"row\",sx:{mt:3,mb:4},children:[/*#__PURE__*/_jsx(Typography,{sx:{fontSize:18},children:\"\\uAC70\\uB798 \\uAC00\\uB2A5 \\uD1A0\\uD070 : \"}),/*#__PURE__*/_jsx(Typography,{sx:{ml:1},variant:\"h6\",children:contract})]}),/*#__PURE__*/_jsx(Divider,{}),/*#__PURE__*/_jsxs(Stack,{direction:\"row\",sx:{mt:4},children:[/*#__PURE__*/_jsx(Typography,{sx:{fontSize:18},children:\"\\uC989\\uC2DC \\uAD6C\\uB9E4\\uAC00 : \"}),/*#__PURE__*/_jsxs(Typography,{sx:{ml:1},variant:\"h6\",children:[convertToAccountingFormat(price),\" \",symbol]})]}),/*#__PURE__*/_jsxs(Stack,{direction:\"row\",sx:{mt:3},children:[/*#__PURE__*/_jsx(Typography,{sx:{fontSize:18},children:\"\\uCD5C\\uC18C \\uC81C\\uC548\\uAC00 : \"}),/*#__PURE__*/_jsxs(Typography,{sx:{ml:1},variant:\"h6\",children:[convertToAccountingFormat(minPrice),\" \",symbol]})]}),/*#__PURE__*/_jsxs(Stack,{direction:\"row\",sx:{mt:3},children:[/*#__PURE__*/_jsx(Typography,{sx:{fontSize:18},children:\"\\uCD5C\\uACE0 \\uC81C\\uC548\\uAC00 : \"}),/*#__PURE__*/_jsxs(Typography,{sx:{ml:1},variant:\"h6\",children:[convertToAccountingFormat(maxPrice),\" \",symbol]})]}),/*#__PURE__*/_jsxs(Stack,{direction:\"row\",sx:{mt:3,mb:4},children:[/*#__PURE__*/_jsx(Typography,{sx:{fontSize:18},children:\"\\uCD5C\\uACE0 \\uC81C\\uC548\\uC790 : \"}),/*#__PURE__*/_jsx(Typography,{sx:{ml:1,mr:2},variant:\"h6\",children:proposer}),proposer.length!==0?/*#__PURE__*/_jsx(Link,{underline:\"none\",to:\"/whosart/\".concat(proposer),component:RouterLink,children:\"(\\uCF5C\\uB809\\uC158 \\uBCF4\\uAE30)\"}):null]}),/*#__PURE__*/_jsx(Divider,{})]}):null,saleYn===true?/*#__PURE__*/_jsx(_Fragment,{children:currentTime<=endDate&&ended===false?/*#__PURE__*/_jsxs(Box,{sx:{mt:5},children:[/*#__PURE__*/_jsxs(Button,{fullWidth:true,size:\"large\",variant:\"contained\",sx:{mb:3,fontSize:18},onClick:toggleInstant,children:[convertToAccountingFormat(price),\" \",symbol,\" \\uC5D0 \\uC989\\uC2DC \\uAD6C\\uB9E4\\uD558\\uAE30\"]}),/*#__PURE__*/_jsx(Button,{fullWidth:true,size:\"large\",variant:\"contained\",sx:{mb:4,fontSize:18},onClick:toggleModal,children:\"\\uC0C8\\uB85C\\uC6B4 \\uAE08\\uC561 \\uC81C\\uC548\\uD558\\uAE30\"}),/*#__PURE__*/_jsx(Modal,{open:instantModal,children:/*#__PURE__*/_jsxs(Card,{sx:{width:'40%',border:1,borderRadius:1,borderColor:'grey.main',backgroundColor:'#ffffff',top:'25%',left:'30%'},children:[/*#__PURE__*/_jsx(Box,{children:/*#__PURE__*/_jsxs(Typography,{sx:{ml:3,pt:2},variant:\"h5\",children:[convertToAccountingFormat(price),\" \",symbol,\"\\uC5D0 \\uC989\\uC2DC \\uAD6C\\uB9E4\\uD558\\uAE30\"]})}),/*#__PURE__*/_jsx(Divider,{sx:{mt:2}}),/*#__PURE__*/_jsx(FormikProvider,{value:formik,children:/*#__PURE__*/_jsx(Form,{autoComplete:\"off\",noValidate:true,children:/*#__PURE__*/_jsxs(Box,{sx:{mt:4,ml:3,mr:3},children:[/*#__PURE__*/_jsxs(Stack,{direction:\"row\",alignItems:\"center\",children:[/*#__PURE__*/_jsx(TextField,{fullWidth:true,type:\"text\",label:\"\\uB0B4 \\uC9C0\\uAC11 \\uC8FC\\uC18C\",sx:{mr:3},onChange:handleAddress,value:address}),/*#__PURE__*/_jsx(Button,{size:\"large\",variant:\"contained\",sx:{width:'20%',fontSize:16},onClick:checkBalance,children:\"\\uC794\\uC561 \\uC870\\uD68C\"})]}),/*#__PURE__*/_jsxs(Stack,{direction:\"row\",sx:{mt:3,ml:1.5,mr:1},justifyContent:\"space-between\",alignItems:\"center\",children:[/*#__PURE__*/_jsx(Typography,{children:\"\\uB0B4 \\uC794\\uC561\"}),/*#__PURE__*/_jsxs(Typography,{sx:{fontWeight:900,fontSize:18},children:[convertToAccountingFormat(balance),\" \",symbol]})]}),/*#__PURE__*/_jsx(Stack,{direction:\"row\",sx:{mt:3},children:/*#__PURE__*/_jsx(TextField,{fullWidth:true,type:\"text\",label:\"\\uAC1C\\uC778\\uD0A4\",onChange:handlePriv,value:privKey})}),/*#__PURE__*/_jsx(Divider,{sx:{mt:4}}),/*#__PURE__*/_jsxs(Stack,{direction:\"row\",sx:{mt:3,mb:3},justifyContent:\"center\",children:[loading===false?/*#__PURE__*/_jsx(Button,{size:\"large\",variant:\"contained\",sx:{width:'15%',fontSize:16},onClick:toggleInstant,children:\"\\uCDE8\\uC18C\"}):null,/*#__PURE__*/_jsx(LoadingButton,{size:\"large\",variant:\"contained\",sx:{ml:3,width:'15%',fontSize:16},loading:loading,onClick:function onClick(){return checkAddress(address,privKey,'purchase');},children:\"\\uAD6C\\uB9E4\\uD558\\uAE30\"})]})]})})})]})}),/*#__PURE__*/_jsx(Modal,{open:proposeModal,children:/*#__PURE__*/_jsxs(Card,{sx:{width:'40%',border:1,borderRadius:1,borderColor:'grey.main',backgroundColor:'#ffffff',top:'20%',left:'30%'},children:[/*#__PURE__*/_jsx(Box,{children:/*#__PURE__*/_jsx(Typography,{sx:{ml:3,pt:2},variant:\"h5\",children:\"\\uC0C8\\uB85C\\uC6B4 \\uAE08\\uC561 \\uC81C\\uC548\\uD558\\uAE30\"})}),/*#__PURE__*/_jsx(Divider,{sx:{mt:2}}),/*#__PURE__*/_jsx(FormikProvider,{value:formik,children:/*#__PURE__*/_jsx(Form,{autoComplete:\"off\",noValidate:true,children:/*#__PURE__*/_jsxs(Box,{sx:{mt:4,ml:3,mr:3},children:[/*#__PURE__*/_jsxs(Stack,{direction:\"row\",alignItems:\"center\",children:[/*#__PURE__*/_jsx(TextField,{fullWidth:true,type:\"text\",label:\"\\uB0B4 \\uC9C0\\uAC11 \\uC8FC\\uC18C\",sx:{mr:3},onChange:handleAddress,value:address}),/*#__PURE__*/_jsx(Button,{size:\"large\",variant:\"contained\",sx:{width:'20%',fontSize:16},onClick:checkBalance,children:\"\\uC794\\uC561 \\uC870\\uD68C\"})]}),/*#__PURE__*/_jsxs(Stack,{direction:\"row\",sx:{mt:3,ml:1.5,mr:1},justifyContent:\"space-between\",alignItems:\"center\",children:[/*#__PURE__*/_jsx(Typography,{children:\"\\uB0B4 \\uC794\\uC561\"}),/*#__PURE__*/_jsxs(Typography,{sx:{fontWeight:900,fontSize:18},children:[convertToAccountingFormat(balance),\" \",symbol]})]}),/*#__PURE__*/_jsx(Stack,{direction:\"row\",sx:{mt:3},children:/*#__PURE__*/_jsx(TextField,_objectSpread({fullWidth:true,type:\"number\",label:\"\\uC81C\\uC548 \\uAE08\\uC561\"},getFieldProps('price')))}),/*#__PURE__*/_jsx(Stack,{direction:\"row\",sx:{mt:3},children:/*#__PURE__*/_jsx(TextField,{fullWidth:true,type:\"text\",label:\"\\uAC1C\\uC778\\uD0A4\",onChange:handlePriv,value:privKey})}),/*#__PURE__*/_jsx(Divider,{sx:{mt:4}}),/*#__PURE__*/_jsxs(Stack,{direction:\"row\",sx:{mt:3,mb:3},justifyContent:\"center\",children:[loading===false?/*#__PURE__*/_jsx(Button,{size:\"large\",variant:\"contained\",sx:{width:'15%',fontSize:16},onClick:toggleModal,children:\"\\uCDE8\\uC18C\"}):null,/*#__PURE__*/_jsx(LoadingButton,{size:\"large\",variant:\"contained\",type:\"submit\",sx:{ml:3,width:'15%',fontSize:16},loading:loading,onClick:function onClick(){return checkAddress(address,privKey,'propose');},children:\"\\uC81C\\uC548\\uD558\\uAE30\"})]})]})})})]})})]}):/*#__PURE__*/_jsxs(Box,{sx:{mt:5},children:[/*#__PURE__*/_jsxs(Button,{fullWidth:true,color:\"inherit\",size:\"large\",variant:\"contained\",sx:{mb:3,fontSize:18},children:[convertToAccountingFormat(price),\" \",symbol,\" \\uC5D0 \\uC989\\uC2DC \\uAD6C\\uB9E4\\uD558\\uAE30\"]}),/*#__PURE__*/_jsx(Button,{fullWidth:true,color:\"inherit\",size:\"large\",variant:\"contained\",sx:{mb:4,fontSize:18},children:\"\\uC0C8\\uB85C\\uC6B4 \\uAE08\\uC561 \\uC81C\\uC548\\uD558\\uAE30\"})]})}):null]})]})})]})}):/*#__PURE__*/_jsx(Container,{children:/*#__PURE__*/_jsx(MotionContainer,{initial:\"initial\",sx:{mt:10},open:true,children:/*#__PURE__*/_jsxs(Box,{sx:{maxWidth:480,margin:'auto',textAlign:'center'},children:[/*#__PURE__*/_jsx(motion.div,{variants:varBounceIn,children:/*#__PURE__*/_jsx(Typography,{variant:\"h3\",paragraph:true,children:\"\\uC694\\uCCAD \\uC0AC\\uD56D \\uCC98\\uB9AC \\uC644\\uB8CC\"})}),/*#__PURE__*/_jsx(Typography,{sx:{color:'text.secondary'},children:\"\\uC694\\uCCAD\\uD558\\uC2E0 \\uB0B4\\uC6A9\\uC774 \\uCC98\\uB9AC\\uB418\\uC5C8\\uC2B5\\uB2C8\\uB2E4.\"}),/*#__PURE__*/_jsx(motion.div,{variants:varBounceIn,children:/*#__PURE__*/_jsx(Box,{component:\"img\",src:\"/static/illustrations/illustration_register.png\",sx:{height:260,mx:'auto',my:{xs:5,sm:10}}})}),/*#__PURE__*/_jsx(Button,{to:\"/\",size:\"large\",variant:\"contained\",component:RouterLink,children:\"\\uD648\\uC73C\\uB85C \\uB3CC\\uC544\\uAC00\\uAE30\"})]})})})}):/*#__PURE__*/_jsx(Container,{children:/*#__PURE__*/_jsx(MotionContainer,{initial:\"initial\",sx:{mt:10},open:true,children:/*#__PURE__*/_jsxs(Box,{sx:{maxWidth:480,margin:'auto',textAlign:'center'},children:[/*#__PURE__*/_jsx(motion.div,{variants:varBounceIn,children:/*#__PURE__*/_jsx(Typography,{variant:\"h3\",paragraph:true,children:\"\\uC798\\uBABB\\uB41C \\uC694\\uCCAD\\uC785\\uB2C8\\uB2E4.\"})}),/*#__PURE__*/_jsx(Typography,{sx:{color:'text.secondary'},children:\"\\uD574\\uB2F9 \\uC544\\uC774\\uD15C\\uC744 \\uCC3E\\uC744 \\uC218 \\uC5C6\\uC2B5\\uB2C8\\uB2E4.\"}),/*#__PURE__*/_jsx(motion.div,{variants:varBounceIn,children:/*#__PURE__*/_jsx(Box,{component:\"img\",src:\"/static/illustrations/illustration_404.svg\",sx:{height:260,mx:'auto',my:{xs:5,sm:10}}})})]})})})});};export default ItemPurchase;","map":{"version":3,"sources":["C:/SSAFY/WORKSPACE/NFT/S06P22A106/frontend/src/pages/ItemPurchase.js"],"names":["Yup","Box","Button","Card","CardContent","CardHeader","Container","Divider","Link","Modal","Stack","TextField","Typography","useEffect","useState","styled","RouterLink","useLocation","Form","FormikProvider","useFormik","LoadingButton","axios","Web3","moment","Page","COMMON_HEADER","COMMON_ABI","getSaleInfoBy","onResponse","onContractCall","onInvalidAddress","getAddressFrom","sendTransaction","convertToAccountingFormat","motion","MotionContainer","varBounceIn","ImgStyle","top","width","height","objectFit","position","ItemPurchase","tokenId","pathname","substring","item","setItem","itemName","setItemName","description","setDescription","author","setAuthor","authorAdr","setAuthorAdr","dueDate","setDueDate","contract","setContract","symbol","price","setPrice","minPrice","setMinPrice","maxPrice","setMaxPrice","proposer","setProposer","balance","setBalance","uri","setUri","isCollection","setIsCollection","isComplete","setIsComplete","currentTime","parseInt","toFixed","endDate","setEndDate","ended","setEnded","saleYn","setSaleYn","instantModal","setInstantModal","address","setAddress","privKey","setPrivKey","loading","setLoading","proposeModal","setProposeModal","web3","providers","HttpProvider","process","env","REACT_APP_ETHEREUM_RPC_URL","getItemDetail","toggleInstant","handleAddress","e","target","value","handlePriv","toggleModal","typeSchema","object","shape","number","positive","integer","required","formik","initialValues","validationSchema","onSubmit","getFieldProps","tryBid","tryPurchase","mt","pt","length","pl","pr","color","p","ml","mb","mr","fontSize","border","borderRadius","borderColor","backgroundColor","left","checkBalance","fontWeight","checkAddress","maxWidth","margin","textAlign","mx","my","xs","sm"],"mappings":"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","sourcesContent":["import * as Yup from 'yup';\r\nimport {\r\n  Box,\r\n  Button,\r\n  Card,\r\n  CardContent,\r\n  CardHeader,\r\n  Container,\r\n  Divider,\r\n  Link,\r\n  Modal,\r\n  Stack,\r\n  TextField,\r\n  Typography\r\n} from '@mui/material';\r\nimport { useEffect, useState } from 'react';\r\nimport { styled } from '@mui/material/styles';\r\nimport { Link as RouterLink, useLocation } from 'react-router-dom';\r\nimport { Form, FormikProvider, useFormik } from 'formik';\r\nimport { LoadingButton } from '@mui/lab';\r\nimport axios from 'axios';\r\nimport Web3 from 'web3';\r\nimport moment from 'moment';\r\nimport Page from '../components/Page';\r\nimport COMMON_HEADER from '../common/HeaderType';\r\nimport COMMON_ABI from '../common/ABI';\r\nimport getSaleInfoBy from '../common/SaleInfoGetter';\r\nimport { onResponse, onContractCall, onInvalidAddress } from '../common/ErrorMessage';\r\nimport getAddressFrom from '../utils/AddressExtractor';\r\nimport sendTransaction from '../utils/TxSender';\r\nimport { convertToAccountingFormat } from '../utils/NumberFormatter';\r\nimport { motion } from 'framer-motion';\r\nimport { MotionContainer, varBounceIn } from '../components/animate';\r\n\r\n// 이미지 스타일\r\nconst ImgStyle = styled('img')({\r\n  top: 0,\r\n  width: '100%',\r\n  height: '100%',\r\n  objectFit: 'contain',\r\n  position: 'absolute'\r\n});\r\n\r\n/**\r\n * [구매(거래)]를 위한 화면\r\n */\r\nconst ItemPurchase = () => {\r\n  // [변수] 토큰 ID (URL 파라미터 사용)\r\n  const tokenId = useLocation().pathname.substring(11);\r\n\r\n  // [변수] 아이템, 작품명, 아이템 소개, 판매자, 판매자 주소, 전시 종료일, 거래 가능 토큰 주소, 심볼, 즉시 구매가, 최소 제안가,\r\n  //       최고 제안가, 최고 제안자, 잔액, 토큰 URI, 컬렉션 유무, 처리 완료 여부, 현재 시간, 판매 종료 시간, 판매 종료 여부,\r\n  //       판매중 여부\r\n  const [item, setItem] = useState('');\r\n  const [itemName, setItemName] = useState('작품명');\r\n  const [description, setDescription] = useState('아이템 소개');\r\n  const [author, setAuthor] = useState('');\r\n  const [authorAdr, setAuthorAdr] = useState('');\r\n  const [dueDate, setDueDate] = useState('');\r\n  const [contract, setContract] = useState('');\r\n  const symbol = 'SSF';\r\n  const [price, setPrice] = useState('0');\r\n  const [minPrice, setMinPrice] = useState('0');\r\n  const [maxPrice, setMaxPrice] = useState('0');\r\n  const [proposer, setProposer] = useState('');\r\n  const [balance, setBalance] = useState('0');\r\n  const [uri, setUri] = useState('');\r\n  const [isCollection, setIsCollection] = useState(false);\r\n  const [isComplete, setIsComplete] = useState(false);\r\n  const currentTime = parseInt((moment() / 1000).toFixed(0));\r\n  const [endDate, setEndDate] = useState('0');\r\n  const [ended, setEnded] = useState('');\r\n  const [saleYn, setSaleYn] = useState(true);\r\n\r\n  // [변수] 즉시 구매 모달 (모달, 지갑 주소, 개인키, 로딩)\r\n  const [instantModal, setInstantModal] = useState(false);\r\n  const [address, setAddress] = useState('');\r\n  const [privKey, setPrivKey] = useState('');\r\n  const [loading, setLoading] = useState(false);\r\n\r\n  // [변수] 새로운 금액 제안 모달 (모달)\r\n  const [proposeModal, setProposeModal] = useState(false);\r\n\r\n  // Web3\r\n  const web3 = new Web3(new Web3.providers.HttpProvider(process.env.REACT_APP_ETHEREUM_RPC_URL));\r\n\r\n  /**\r\n   * [초기 데이터 설정]\r\n   * 화면 첫 렌더링시 판매되고 있는 작품 상세 정보를 조회합니다.\r\n   */\r\n  useEffect(() => {\r\n    getItemDetail();\r\n  }, []);\r\n\r\n  // 모달 핸들링 (즉시 구매)\r\n  const toggleInstant = () => {\r\n    setAddress('');\r\n    setBalance('0');\r\n    setPrivKey('');\r\n    setInstantModal(!instantModal);\r\n  };\r\n\r\n  // 지갑 주소 입력 핸들링\r\n  const handleAddress = (e) => {\r\n    setAddress(e.target.value);\r\n    setBalance('0');\r\n  };\r\n\r\n  // 개인키 입력 핸들링\r\n  const handlePriv = (e) => {\r\n    setPrivKey(e.target.value);\r\n  };\r\n\r\n  // 모달 핸들링 (금액 제안)\r\n  const toggleModal = () => {\r\n    setAddress('');\r\n    setBalance('0');\r\n    setPrivKey('');\r\n    setProposeModal(!proposeModal);\r\n  };\r\n\r\n  // 타이핑 헬퍼\r\n  const typeSchema = Yup.object().shape({\r\n    price: Yup.number().positive().integer().required()\r\n  });\r\n\r\n  // 입력 데이터 (즉시 구매, 금액 제안) 처리\r\n  const formik = useFormik({\r\n    initialValues: {\r\n      price: ''\r\n    },\r\n    validationSchema: typeSchema,\r\n    onSubmit: () => { }\r\n  });\r\n  const { getFieldProps } = formik;\r\n\r\n  /**\r\n   * PJT Ⅱ - 과제 2: 작품 조회\r\n   * Req. 2-F3 작품 상세 조회\r\n   *\r\n   * token id로 작품의 상세 정보를 조회합니다.\r\n   * 작품의 tokenURI를 NFT로부터 직접 조회합니다.\r\n   *\r\n   * PJT Ⅲ - 과제 2: 작품 판매 등록\r\n   * Req. 2-F3 작품 상세 화면 수정\r\n   *\r\n   * 작품의 판매 등록 여부에 따라 sale 컨트랙트를 호출할 수 있는 버튼\r\n   * (제안하기, 구매하기)이 추가되어야 합니다.\r\n   *\r\n   */\r\n  const getItemDetail = async () => {\r\n    // TODO \r\n    setIsCollection(false);\r\n  };\r\n\r\n  /**\r\n  * PJT Ⅲ - 과제 3: 거래 진행\r\n  * Req. 3-F1 제안하기\r\n  * \r\n  * 1. bid 컨트랙트 함수 호출 파라메터를 지정합니다.\r\n  * 2. Sale 컨트랙트가 구매자의 SSAFY 토큰을 상대방에게 전송할 수 있는 권한을 부여합니다. (approveERC20Token() 호출)\r\n  * 2. 정상 호출 후, Sale 컨트랙트의 purchase() 함수를 호출합니다. \r\n  */\r\n  const tryBid = () => {\r\n    // TODO\r\n    setLoading(false);\r\n  };\r\n\r\n  /**\r\n   * PJT Ⅲ - 과제 3: 거래 진행\r\n   * Req. 3-F2 구매하기\r\n   * \r\n   * 1. Sale 컨트랙트가 구매자의 SSAFY 토큰을 상대방에게 전송할 수 있는 권한을 부여합니다.\r\n   * 2. 정상 호출 후, Sale 컨트랙트의 purchase() 함수를 호출합니다. \r\n   * 3. 정상 호출 후 buyer 정보를 백엔드에 업데이트합니다.\r\n   */\r\n  const tryPurchase = async () => {\r\n    // TODO \r\n    setLoading(false);\r\n  };\r\n\r\n  return (\r\n    <Page title=\"SSAFY NFT\" maxWidth=\"100%\" minHeight=\"100%\">\r\n      {isCollection === true ? (\r\n        <>\r\n          {isComplete === false ? (\r\n            <>\r\n              <Stack direction=\"row\" justifyContent=\"center\" sx={{ mt: 4 }}>\r\n                <Stack width=\"25%\">\r\n                  <Card>\r\n                    <Box sx={{ pt: '100%', position: 'relative' }}>\r\n                      <ImgStyle src={item.length !== 0 ? item : null} />\r\n                    </Box>\r\n                    <Divider />\r\n                    <Stack spacing={2}>\r\n                      <Typography variant=\"h4\" sx={{ pt: 3, pl: 3, pr: 3 }}>\r\n                        {itemName}\r\n                      </Typography>\r\n                      <Typography sx={{ color: 'text.secondary', p: 3 }}>{description}</Typography>\r\n                    </Stack>\r\n                  </Card>\r\n                </Stack>\r\n\r\n                <Stack sx={{ ml: 10 }} width=\"50%\">\r\n                  <Card>\r\n                    <CardHeader sx={{ ml: 1, mb: 2 }} title=\"작품 정보\" />\r\n                    <Divider />\r\n                    <CardContent sx={{ ml: 1, mr: 1, pt: 4 }}>\r\n                      <Stack direction=\"row\">\r\n                        <Typography sx={{ fontSize: 18 }}>작품 이름 : </Typography>\r\n                        <Typography sx={{ ml: 1 }} variant=\"h6\">\r\n                          {itemName}\r\n                        </Typography>\r\n                      </Stack>\r\n                      <Stack direction=\"row\" sx={{ mt: 3 }}>\r\n                        <Typography sx={{ fontSize: 18 }}>작가명 : </Typography>\r\n                        <Typography sx={{ ml: 1 }} variant=\"h6\">\r\n                          {author}\r\n                        </Typography>\r\n                      </Stack>\r\n                      <Stack direction=\"row\" sx={{ mt: 3, mb: 4 }}>\r\n                        <Typography sx={{ fontSize: 18 }}>설명 : </Typography>\r\n                        <Typography sx={{ ml: 1 }} variant=\"h6\">\r\n                          {description}\r\n                        </Typography>\r\n                      </Stack>\r\n                      <Stack direction=\"row\" sx={{ mt: 3, mb: 4 }}>\r\n                        <Typography sx={{ fontSize: 18 }}>TokenURI : </Typography>\r\n                        <Typography sx={{ ml: 1 }} variant=\"h6\">\r\n                          {uri}\r\n                        </Typography>\r\n                      </Stack>\r\n                      <Divider />\r\n                      <Stack direction=\"row\" sx={{ mt: 4 }}>\r\n                        <Typography sx={{ fontSize: 18 }}>소유자 : </Typography>\r\n                        <Typography sx={{ ml: 1, mr: 2 }} variant=\"h6\">\r\n                          {authorAdr}\r\n                        </Typography>\r\n                        {authorAdr.length !== 0 ? (\r\n                          <Link\r\n                            underline=\"none\"\r\n                            to={`/whosart/${authorAdr}`}\r\n                            component={RouterLink}\r\n                          >\r\n                            (콜렉션 보기)\r\n                          </Link>\r\n                        ) : null}\r\n                      </Stack>\r\n                      {saleYn === true ? (\r\n                        <>\r\n                          <Stack direction=\"row\" sx={{ mt: 3 }}>\r\n                            <Typography sx={{ fontSize: 18 }}>전시 종료 : </Typography>\r\n                            <Typography sx={{ ml: 1 }} variant=\"h6\">\r\n                              {dueDate}\r\n                            </Typography>\r\n                          </Stack>\r\n                          <Stack direction=\"row\" sx={{ mt: 3, mb: 4 }}>\r\n                            <Typography sx={{ fontSize: 18 }}>거래 가능 토큰 : </Typography>\r\n                            <Typography sx={{ ml: 1 }} variant=\"h6\">\r\n                              {contract}\r\n                            </Typography>\r\n                          </Stack>\r\n                          <Divider />\r\n                          <Stack direction=\"row\" sx={{ mt: 4 }}>\r\n                            <Typography sx={{ fontSize: 18 }}>즉시 구매가 : </Typography>\r\n                            <Typography sx={{ ml: 1 }} variant=\"h6\">\r\n                              {convertToAccountingFormat(price)} {symbol}\r\n                            </Typography>\r\n                          </Stack>\r\n                          <Stack direction=\"row\" sx={{ mt: 3 }}>\r\n                            <Typography sx={{ fontSize: 18 }}>최소 제안가 : </Typography>\r\n                            <Typography sx={{ ml: 1 }} variant=\"h6\">\r\n                              {convertToAccountingFormat(minPrice)} {symbol}\r\n                            </Typography>\r\n                          </Stack>\r\n                          <Stack direction=\"row\" sx={{ mt: 3 }}>\r\n                            <Typography sx={{ fontSize: 18 }}>최고 제안가 : </Typography>\r\n                            <Typography sx={{ ml: 1 }} variant=\"h6\">\r\n                              {convertToAccountingFormat(maxPrice)} {symbol}\r\n                            </Typography>\r\n                          </Stack>\r\n                          <Stack direction=\"row\" sx={{ mt: 3, mb: 4 }}>\r\n                            <Typography sx={{ fontSize: 18 }}>최고 제안자 : </Typography>\r\n                            <Typography sx={{ ml: 1, mr: 2 }} variant=\"h6\">\r\n                              {proposer}\r\n                            </Typography>\r\n                            {proposer.length !== 0 ? (\r\n                              <Link\r\n                                underline=\"none\"\r\n                                to={`/whosart/${proposer}`}\r\n                                component={RouterLink}\r\n                              >\r\n                                (콜렉션 보기)\r\n                              </Link>\r\n                            ) : null}\r\n                          </Stack>\r\n\r\n                          <Divider />\r\n                        </>\r\n                      ) : null}\r\n\r\n                      {/* \r\n                       * PJT Ⅲ - 과제 3: 거래 진행\r\n                       * 판매 중인 상태인 경우 거래를 위한 버튼을 추가합니다.\r\n                       * \r\n                       * Req. 3-F1 제안하기\r\n                       * Req. 3-F2 구매하기\r\n                       */}\r\n                      {saleYn === true ? (\r\n                        <>\r\n                          {currentTime <= endDate && ended === false ? (\r\n                            <Box sx={{ mt: 5 }}>\r\n                              <Button\r\n                                fullWidth\r\n                                size=\"large\"\r\n                                variant=\"contained\"\r\n                                sx={{ mb: 3, fontSize: 18 }}\r\n                                onClick={toggleInstant}\r\n                              >\r\n                                {convertToAccountingFormat(price)} {symbol} 에 즉시 구매하기\r\n                              </Button>\r\n                              <Button\r\n                                fullWidth\r\n                                size=\"large\"\r\n                                variant=\"contained\"\r\n                                sx={{ mb: 4, fontSize: 18 }}\r\n                                onClick={toggleModal}\r\n                              >\r\n                                새로운 금액 제안하기\r\n                              </Button>\r\n\r\n                              <Modal open={instantModal}>\r\n                                <Card\r\n                                  sx={{\r\n                                    width: '40%',\r\n                                    border: 1,\r\n                                    borderRadius: 1,\r\n                                    borderColor: 'grey.main',\r\n                                    backgroundColor: '#ffffff',\r\n                                    top: '25%',\r\n                                    left: '30%'\r\n                                  }}\r\n                                >\r\n                                  <Box>\r\n                                    <Typography sx={{ ml: 3, pt: 2 }} variant=\"h5\">\r\n                                      {convertToAccountingFormat(price)} {symbol}에 즉시 구매하기\r\n                                    </Typography>\r\n                                  </Box>\r\n                                  <Divider sx={{ mt: 2 }} />\r\n                                  <FormikProvider value={formik}>\r\n                                    <Form autoComplete=\"off\" noValidate>\r\n                                      <Box sx={{ mt: 4, ml: 3, mr: 3 }}>\r\n                                        <Stack direction=\"row\" alignItems=\"center\">\r\n                                          <TextField\r\n                                            fullWidth\r\n                                            type=\"text\"\r\n                                            label=\"내 지갑 주소\"\r\n                                            sx={{ mr: 3 }}\r\n                                            onChange={handleAddress}\r\n                                            value={address}\r\n                                          />\r\n                                          <Button\r\n                                            size=\"large\"\r\n                                            variant=\"contained\"\r\n                                            sx={{ width: '20%', fontSize: 16 }}\r\n                                            onClick={checkBalance}\r\n                                          >\r\n                                            잔액 조회\r\n                                          </Button>\r\n                                        </Stack>\r\n                                        <Stack\r\n                                          direction=\"row\"\r\n                                          sx={{ mt: 3, ml: 1.5, mr: 1 }}\r\n                                          justifyContent=\"space-between\"\r\n                                          alignItems=\"center\"\r\n                                        >\r\n                                          <Typography>내 잔액</Typography>\r\n                                          <Typography sx={{ fontWeight: 900, fontSize: 18 }}>\r\n                                            {convertToAccountingFormat(balance)} {symbol}\r\n                                          </Typography>\r\n                                        </Stack>\r\n                                        <Stack direction=\"row\" sx={{ mt: 3 }}>\r\n                                          <TextField\r\n                                            fullWidth\r\n                                            type=\"text\"\r\n                                            label=\"개인키\"\r\n                                            onChange={handlePriv}\r\n                                            value={privKey}\r\n                                          />\r\n                                        </Stack>\r\n                                        <Divider sx={{ mt: 4 }} />\r\n                                        <Stack\r\n                                          direction=\"row\"\r\n                                          sx={{ mt: 3, mb: 3 }}\r\n                                          justifyContent=\"center\"\r\n                                        >\r\n                                          {loading === false ? (\r\n                                            <Button\r\n                                              size=\"large\"\r\n                                              variant=\"contained\"\r\n                                              sx={{ width: '15%', fontSize: 16 }}\r\n                                              onClick={toggleInstant}\r\n                                            >\r\n                                              취소\r\n                                            </Button>\r\n                                          ) : null}\r\n                                          <LoadingButton\r\n                                            size=\"large\"\r\n                                            variant=\"contained\"\r\n                                            sx={{ ml: 3, width: '15%', fontSize: 16 }}\r\n                                            loading={loading}\r\n                                            onClick={() =>\r\n                                              checkAddress(address, privKey, 'purchase')\r\n                                            }\r\n                                          >\r\n                                            구매하기\r\n                                          </LoadingButton>\r\n                                        </Stack>\r\n                                      </Box>\r\n                                    </Form>\r\n                                  </FormikProvider>\r\n                                </Card>\r\n                              </Modal>\r\n\r\n                              <Modal open={proposeModal}>\r\n                                <Card\r\n                                  sx={{\r\n                                    width: '40%',\r\n                                    border: 1,\r\n                                    borderRadius: 1,\r\n                                    borderColor: 'grey.main',\r\n                                    backgroundColor: '#ffffff',\r\n                                    top: '20%',\r\n                                    left: '30%'\r\n                                  }}\r\n                                >\r\n                                  <Box>\r\n                                    <Typography sx={{ ml: 3, pt: 2 }} variant=\"h5\">\r\n                                      새로운 금액 제안하기\r\n                                    </Typography>\r\n                                  </Box>\r\n                                  <Divider sx={{ mt: 2 }} />\r\n                                  <FormikProvider value={formik}>\r\n                                    <Form autoComplete=\"off\" noValidate>\r\n                                      <Box sx={{ mt: 4, ml: 3, mr: 3 }}>\r\n                                        <Stack direction=\"row\" alignItems=\"center\">\r\n                                          <TextField\r\n                                            fullWidth\r\n                                            type=\"text\"\r\n                                            label=\"내 지갑 주소\"\r\n                                            sx={{ mr: 3 }}\r\n                                            onChange={handleAddress}\r\n                                            value={address}\r\n                                          />\r\n                                          <Button\r\n                                            size=\"large\"\r\n                                            variant=\"contained\"\r\n                                            sx={{ width: '20%', fontSize: 16 }}\r\n                                            onClick={checkBalance}\r\n                                          >\r\n                                            잔액 조회\r\n                                          </Button>\r\n                                        </Stack>\r\n                                        <Stack\r\n                                          direction=\"row\"\r\n                                          sx={{ mt: 3, ml: 1.5, mr: 1 }}\r\n                                          justifyContent=\"space-between\"\r\n                                          alignItems=\"center\"\r\n                                        >\r\n                                          <Typography>내 잔액</Typography>\r\n                                          <Typography sx={{ fontWeight: 900, fontSize: 18 }}>\r\n                                            {convertToAccountingFormat(balance)} {symbol}\r\n                                          </Typography>\r\n                                        </Stack>\r\n                                        <Stack direction=\"row\" sx={{ mt: 3 }}>\r\n                                          <TextField\r\n                                            fullWidth\r\n                                            type=\"number\"\r\n                                            label=\"제안 금액\"\r\n                                            {...getFieldProps('price')}\r\n                                          />\r\n                                        </Stack>\r\n                                        <Stack direction=\"row\" sx={{ mt: 3 }}>\r\n                                          <TextField\r\n                                            fullWidth\r\n                                            type=\"text\"\r\n                                            label=\"개인키\"\r\n                                            onChange={handlePriv}\r\n                                            value={privKey}\r\n                                          />\r\n                                        </Stack>\r\n                                        <Divider sx={{ mt: 4 }} />\r\n                                        <Stack\r\n                                          direction=\"row\"\r\n                                          sx={{ mt: 3, mb: 3 }}\r\n                                          justifyContent=\"center\"\r\n                                        >\r\n                                          {loading === false ? (\r\n                                            <Button\r\n                                              size=\"large\"\r\n                                              variant=\"contained\"\r\n                                              sx={{ width: '15%', fontSize: 16 }}\r\n                                              onClick={toggleModal}\r\n                                            >\r\n                                              취소\r\n                                            </Button>\r\n                                          ) : null}\r\n                                          <LoadingButton\r\n                                            size=\"large\"\r\n                                            variant=\"contained\"\r\n                                            type=\"submit\"\r\n                                            sx={{ ml: 3, width: '15%', fontSize: 16 }}\r\n                                            loading={loading}\r\n                                            onClick={() =>\r\n                                              checkAddress(address, privKey, 'propose')\r\n                                            }\r\n                                          >\r\n                                            제안하기\r\n                                          </LoadingButton>\r\n                                        </Stack>\r\n                                      </Box>\r\n                                    </Form>\r\n                                  </FormikProvider>\r\n                                </Card>\r\n                              </Modal>\r\n                            </Box>\r\n                          ) : (\r\n                            <Box sx={{ mt: 5 }}>\r\n                              <Button\r\n                                fullWidth\r\n                                color=\"inherit\"\r\n                                size=\"large\"\r\n                                variant=\"contained\"\r\n                                sx={{ mb: 3, fontSize: 18 }}\r\n                              >\r\n                                {convertToAccountingFormat(price)} {symbol} 에 즉시 구매하기\r\n                              </Button>\r\n                              <Button\r\n                                fullWidth\r\n                                color=\"inherit\"\r\n                                size=\"large\"\r\n                                variant=\"contained\"\r\n                                sx={{ mb: 4, fontSize: 18 }}\r\n                              >\r\n                                새로운 금액 제안하기\r\n                              </Button>\r\n                            </Box>\r\n                          )}\r\n                        </>\r\n                      ) : null}\r\n                    </CardContent>\r\n                  </Card>\r\n                </Stack>\r\n              </Stack>\r\n            </>\r\n          ) : (\r\n            <Container>\r\n              <MotionContainer initial=\"initial\" sx={{ mt: 10 }} open>\r\n                <Box sx={{ maxWidth: 480, margin: 'auto', textAlign: 'center' }}>\r\n                  <motion.div variants={varBounceIn}>\r\n                    <Typography variant=\"h3\" paragraph>\r\n                      요청 사항 처리 완료\r\n                    </Typography>\r\n                  </motion.div>\r\n                  <Typography sx={{ color: 'text.secondary' }}>\r\n                    요청하신 내용이 처리되었습니다.\r\n                  </Typography>\r\n\r\n                  <motion.div variants={varBounceIn}>\r\n                    <Box\r\n                      component=\"img\"\r\n                      src=\"/static/illustrations/illustration_register.png\"\r\n                      sx={{ height: 260, mx: 'auto', my: { xs: 5, sm: 10 } }}\r\n                    />\r\n                  </motion.div>\r\n\r\n                  <Button to=\"/\" size=\"large\" variant=\"contained\" component={RouterLink}>\r\n                    홈으로 돌아가기\r\n                  </Button>\r\n                </Box>\r\n              </MotionContainer>\r\n            </Container>\r\n          )}\r\n        </>\r\n      ) : (\r\n        <Container>\r\n          <MotionContainer initial=\"initial\" sx={{ mt: 10 }} open>\r\n            <Box sx={{ maxWidth: 480, margin: 'auto', textAlign: 'center' }}>\r\n              <motion.div variants={varBounceIn}>\r\n                <Typography variant=\"h3\" paragraph>\r\n                  잘못된 요청입니다.\r\n                </Typography>\r\n              </motion.div>\r\n              <Typography sx={{ color: 'text.secondary' }}>\r\n                해당 아이템을 찾을 수 없습니다.\r\n              </Typography>\r\n\r\n              <motion.div variants={varBounceIn}>\r\n                <Box\r\n                  component=\"img\"\r\n                  src=\"/static/illustrations/illustration_404.svg\"\r\n                  sx={{ height: 260, mx: 'auto', my: { xs: 5, sm: 10 } }}\r\n                />\r\n              </motion.div>\r\n            </Box>\r\n          </MotionContainer>\r\n        </Container>\r\n      )}\r\n    </Page>\r\n  );\r\n};\r\n\r\nexport default ItemPurchase;\r\n"]},"metadata":{},"sourceType":"module"}